!function(window,document){const TBFdbt={" ":"BLANK",a:1,b:12,c:14,d:145,e:15,f:124,g:1245,h:125,i:24,j:245,k:13,l:123,m:134,n:1345,o:135,p:1234,q:12345,r:1235,s:234,t:2345,u:136,v:1236,w:2456,x:1346,y:13456,z:1356,"ç":12346,"é":123456,"à":12356,"[":12356,"è":2346,"ù":23456,"]":23456,"â":16,"ê":126,"î":146,"ô":1456,"û":156,"ë":1246,"ï":12456,"ü":1256,"ö":246,",":2,";":23,":":25,".":256,"?":26,"!":235,'"':2356,"(":236,")":356,"'":3,"¨":46,"@":345,"|":456,_:5,"=":2356,"/":34,"¤":45,"^":4,"`":6,"%":346,"-":36,"+":235,"*":35,">":56,0:3456,1:16,2:126,3:146,4:1456,5:156,6:1246,7:12456,8:1256,9:246},mathTBF={caracMath:{coupureFormule:"5",espaceInsecable:"-BLANK-",blocks:{open:"-56-",close:"-23-"},parenthese:{open:"-236-",close:"-356-"},grandeparenthese1:{open:"-5-236-",close:"-5-356-"},grandeparenthese2:{open:"-45-236-",close:"-45-356-"},accolade:{open:"-46-236-",close:"-46-356-"},grandeaccolade:{open:"-456-236-",close:"-456-356-"},barre:{open:"-123456-",close:"-123456-"},grandebarre:{open:"-456-123456-",close:"-456-123456-"},doublebarre:{open:"-45-123456-",close:"-45-123456-"},grandedoublebarre:{open:"-46-123456-",close:"-46-123456-"},crochet:{open:"-12356-",close:"-23456-"},grandcrochet1:{open:"-5-12356-",close:"-5-23456-"},grandcrochet2:{open:"-45-12356-",close:"-45-23456-"},crochetdouble:{open:"-46-12356-",close:"-46-23456-"},indice:"-26-",exposant:"-4-",suscrit:"-4-4-",souscrit:"-26-26-",fraction:"-34-",matrice:{sepLigne:"-6-345-",caseVide:"-5-2-"},racine:"-345-",majuscule:"-46-",point5:"-5-",point6:"-6-",majusculeronde:"-46-5-"},caracDec:{susouscrit:{8594:"-46-25-",175:"-456-25-",95:"-456-25-",732:"-5-456-25-",126:"-5-456-25-",9180:"-4-25",8994:"-4-25-",8995:"-4-4-25-",8743:"-45-25-",94:"-45-25-",8744:"-456-45-25-"},65:"-46-1-",66:"-46-12-",67:"-46-14-",68:"-46-145-",69:"-46-15-",70:"-46-124-",71:"-46-1245-",72:"-46-125-",73:"-46-24-",74:"-46-245-",75:"-46-13-",76:"-46-123-",77:"-46-134-",78:"-46-1345-",79:"-46-135-",80:"-46-1234-",81:"-46-12345-",82:"-46-1235-",83:"-46-234-",84:"-46-2345-",85:"-46-136-",86:"-46-1236-",87:"-46-2456-",88:"-46-1346-",89:"-46-13456-",90:"-46-1356-",97:"-1-",98:"-12-",99:"-14-",100:"-145-",101:"-15-",102:"-124-",103:"-1245-",104:"-125-",105:"-24-",106:"-245-",107:"-13-",108:"-123-",109:"-134-",110:"-1345-",111:"-135-",112:"-1234-",113:"-12345-",114:"-1235-",115:"-234-",116:"-2345-",117:"-136-",118:"-1236-",119:"-2456-",120:"-1346-",121:"-13456-",122:"-1356-",48:"-3456-",49:"-16-",50:"-126-",51:"-146-",52:"-1456-",53:"-156-",54:"-1246-",55:"-12456-",56:"-1256-",57:"-246-",39:"-3-",40:"-236-",41:"-356-",44:"-2-",58:"-25-",59:"-23-",45:"-36-",46:"-35-35-",42:"-5-35-",43:"-235-",47:"-34-",61:"-2356-",91:"-12356-",93:"-23456-",123:"-46-236-",125:"-46-356-",124:"-123456-",8214:"-45-123456-",33:"-456-35-",160:"-BLANK-",183:"-35-35-",176:"-135-",181:"-45-134-",233:"-123456-",60:"-5-126-",62:"-5-345-",8290:"-35-",8292:"-35-",8289:"",8804:"-45-126-",8805:"-45-345-",10877:"-45-126-",10878:"-45-345-",177:"-235-36-",8800:"-46-2356-",247:"-25-",215:"-35-",8722:"-36-",8725:"-34-",8260:"-34-",8734:"-45-14-",8242:"-3-",8243:"-3-3-",8244:"-3-3-3-",8901:"-35-",8853:"-46-235-",8855:"-46-35-",8747:"-12346-",8706:"-5-145-",8710:"-46-45-145-",8711:"-46-1456-",8748:"-12346-12346-",8749:"-12346-12346-12346-",10764:"-12346-12346-12346-12346-",8750:"-46-12346-",8751:"-46-12346-12346-",8752:"-46-12346-12346-12346-",8477:"-46-46-1235-",8450:"-46-46-14-",8469:"-46-46-1345-",8473:"-46-46-1234-",8474:"-46-46-12345-",8484:"-46-46-1356-",8518:"",8704:"-456-34-",8705:"-46-146-",8707:"-456-16-",8708:"-46-456-16-",8709:"-45-3456-",8743:"-45-35-",8744:"-45-26-",8745:"-45-235-",8746:"-456-235-",8712:"-45-16-",8713:"-45-34-",8714:"-45-16-",8715:"-46-45-16-",8716:"-46-45-34-",8717:"-46-45-16-",8834:"-46-16-",8835:"-5-16-",8836:"-46-34-",8837:"-5-34-",8838:"-456-46-16-",8739:"-123456-",8741:"-456-1256-",8742:"-46-456-1256-",8869:"-45-1256-",8773:"-456-2356-",8776:"-5-2356-",8777:"-46-5-2356-",8764:"-45-2356-",8801:{math:"-2356-2356-",chimie:"123456"},8802:"-46-2356-2356-",8810:"-5-5-126-",8811:"-5-5-345-",8771:"-5-2356-",8778:"-456-5-2356-",8723:"-36-235-",8727:"-5-35-",8728:"-456-3456-",8729:"-35-35-",8826:"-46-46-126-",8827:"-46-46-345-",8828:"-45-45-126-",8829:"-45-45-345-",8917:"-5-2356-",8942:"-256-256-256-",8230:"-256-256-256-",8943:"-256-256-256-",8944:"-256-256-256-",8945:"-256-256-256-",8721:"-46-45-234-",8719:"-46-45-1234-",913:"-46-45-1-",914:"-46-45-12-",915:"-46-45-1245-",916:"-46-45-145-",917:"-46-45-15-",918:"-46-45-1356-",919:"-46-45-125-",920:"-46-45-245-",921:"-46-45-24-",922:"-46-45-13-",923:"-46-45-123-",924:"-46-45-134-",925:"-46-45-1345-",926:"-46-45-1346-",927:"-46-45-135-",928:"-46-45-1234-",929:"-46-45-1235-",931:"-46-45-234-",932:"-46-45-2345-",933:"-46-45-136-",934:"-46-45-124-",935:"-46-45-12345-",936:"-46-45-13456-",937:"-46-45-2456-",945:"-45-1-",946:"-45-12-",947:"-45-1245-",948:"-45-145-",949:"-45-15-",1013:"-45-15-",950:"-45-1356-",951:"-45-125-",952:"-45-245-",953:"-45-24-",954:"-45-13-",955:"-45-123-",956:"-45-134-",957:"-45-1345-",958:"-45-1346-",959:"-45-135-",960:"-45-1234-",961:"-45-1235-",963:"-45-234-",964:"-45-2345-",965:"-45-136-",966:"-45-124-",967:"-45-12345-",968:"-45-13456-",969:"-45-2456-",8592:"-456-246-",8593:"-45-12456-",8594:"-456-156-",8595:"-46-12456-",8596:"-5-12456-",8598:"-45-246-",8599:"-45-156-",8600:"-46-156-",8601:"-46-246-",8614:"-5-156-",8628:"-46-156-",8644:"-456-12456-",8652:"-456-12456-",8653:"-46-5-25-",8655:"-46-25-2-",8656:"-5-25-",8658:"-25-2-",9633:"-456-1456-",9651:"-46-45-145-",10548:"-45-156-",10549:"-46-156-",10231:"-5-12456-"}};var TBAdbt,mathTBA,TBUEdbt,mathTBUE,allVar={fr:{TBdbt:TBFdbt,mathBraille:mathTBF},nemeth:{TBdbt:{" ":"BLANK",a:1,b:12,c:14,d:145,e:15,f:124,g:1245,h:125,i:24,j:245,k:13,l:123,m:134,n:1345,o:135,p:1234,q:12345,r:1235,s:234,t:2345,u:136,v:1236,w:2456,x:1346,y:13456,z:1356,"&":12346,"=":123456,"(":12356,"!":2346,")":23456,"*":16,"<":126,"%":146,":":156,$:1246,"]":12456,"\\":1256,"[":246,1:2,2:23,3:25,4:256,5:26,6:235,7:2356,8:236,9:35,0:356,"/":34,"+":346,"#":3456,">":345,"'":3,"-":36,"@":4,"^":45,_:456,'"':5,".":46,";":56,",":6},mathBraille:{caracMath:{coupureFormule:"5",espaceInsecable:"-BLANK-",separateurIndiceExposant:{virgule:"-246-",pointvirgule:"-456-246-"},indicateurNumerique:"3456",indicateurFraction:{simple:{open:"-1456-",close:"-3456-"},complexe:{open:"-6-1456-",close:"-6-3456-"},hypercomplexe:{open:"-6-6-1456-",close:"-6-6-3456-"},fractionnaire:{open:"-456-1456-",close:"-456-3456-"}},fraction:{simple:{oblique:"-456-34-",horizontale:"-34-"},fractionnaire:{oblique:"-456-34-",horizontale:"-34-"},complexe:{oblique:"-6-456-34-",horizontale:"-6-34-"},hypercomplexe:{horizontale:"-6-6-34-"}},blocks:{open:"",close:""},parenthese:{open:"-12356-",close:"-23456-"},grandeparenthese1:{open:"-5-12356-",close:"-5-23456-"},grandeparenthese2:{open:"-45-12356-",close:"-45-23456-"},accolade:{open:"-46-12356-",close:"-46-23456-"},grandeaccolade:{open:"-456-12356-",close:"-456-23456-"},barre:{open:"-1256-",close:"-1256-"},grandebarre:{open:"-6-1256-",close:"-6-1256-"},doublebarre:{open:"-1256-1256-",close:"-1256-1256-"},grandedoublebarre:{open:"-46-123456-",close:"-46-123456-"},crochet:{open:"-4-12356-",close:"-4-23456-"},grandcrochet1:{open:"-5-12356-",close:"-5-23456-"},grandcrochet2:{open:"-45-12356-",close:"-45-23456-"},crochetdouble:{open:"-46-12356-",close:"-46-23456-"},indice:"-56-",exposant:"-45-",suscrit:"-45-",souscrit:"-56-",matrice:{sepLigne:"-6-345-"},racine:"-345-",finRacine:"-12456-",ordreRadical:"-46-",indiceRadical:"-126-",majuscule:"-6-",indicateurBase:"-5-",majusculeronde:"-46-5-"},caracDec:{susouscrit:{8594:"-46-25-",175:"-456-25-",732:"-5-456-25-",8994:"-4-25-",94:"-45-25-"},65:"-6-1-",66:"-6-12-",67:"-6-14-",68:"-6-145-",69:"-6-15-",70:"-6-124-",71:"-6-1245-",72:"-6-125-",73:"-6-24-",74:"-6-245-",75:"-6-13-",76:"-6-123-",77:"-6-134-",78:"-6-1345-",79:"-6-135-",80:"-6-1234-",81:"-6-12345-",82:"-6-1235-",83:"-6-234-",84:"-6-2345-",85:"-6-136-",86:"-6-1236-",87:"-6-2456-",88:"-6-1346-",89:"-6-13456-",90:"-6-1356-",97:"-1-",98:"-12-",99:"-14-",100:"-145-",101:"-15-",102:"-124-",103:"-1245-",104:"-125-",105:"-24-",106:"-245-",107:"-13-",108:"-123-",109:"-134-",110:"-1345-",111:"-135-",112:"-1234-",113:"-12345-",114:"-1235-",115:"-234-",116:"-2345-",117:"-136-",118:"-1236-",119:"-2456-",120:"-1346-",121:"-13456-",122:"-1356-",48:"-356-",49:"-2-",50:"-23-",51:"-25-",52:"-256-",53:"-26-",54:"-235-",55:"-2356-",56:"-236-",57:"-35-",39:"-3-",40:"-12356-",41:"-23456-",58:"-25-",59:"-23-",91:"-12356-",93:"-23456-",123:"-46-12356-",125:"-46-23456-",124:"-1256-",8214:"-1256-1256-",44:"-6-",45:"-36-",46:"-46-",42:"-4-3456-",43:"-346-",47:"-456-34-",61:"-BLANK-46-13-BLANK-",33:"-12346-",183:"-35-35-",176:"-135-",181:"-45-134-",60:"-5-126-",62:"-5-345-",8804:"-45-126-",10877:"-45-126-",10878:"-45-345-",8805:"-45-345-",177:"-235-36-",8800:"-235-2356-",247:"-25-",215:"-35-",8722:"-36-",8725:"-456-34-",8260:"-456-34-",8734:"-45-14-",8242:"-3-",8243:"-3-3-",8244:"-3-3-3-",8901:"-35-",8853:"-46-235-",8855:"-46-35-",8747:"-2346-",8706:"-5-145-",8710:"-46-45-145-",8711:"-46-1456-",8748:"-2346-2346-",8749:"-2346-2346-2346-",10764:"-2346-2346-2346-2346-",8750:"-2346-6-1246-14-12456-",8751:"-46-12346-12346-",8752:"-46-12346-12346-12346-",8477:"-46-46-1235-",8450:"-46-46-14-",8469:"-46-46-1345-",8473:"-46-46-1234-",8474:"-46-46-12345-",8484:"-46-46-1356-",8704:"-4-12346-",8705:"-46-146-",8707:"-4-123456-",8708:"-46-456-16-",8709:"-45-3456-",8743:"-45-35-",8744:"-45-26-",8745:"-45-235-",8746:"-456-235-",8712:"-45-16-",8713:"-45-34-",8714:"-45-16-",8715:"-46-45-16-",8716:"-46-45-34-",8717:"-46-45-16-",8834:"-46-16-",8835:"-5-16-",8836:"-46-34-",8837:"-5-34-",8838:"-456-46-16-",8741:"-456-1256-",8742:"-46-456-1256-",8869:"-45-1256-",8756:"-6-16-",8757:"-4-34-",8773:"-456-2356-",8776:"-5-2356-",8777:"-46-5-2356-",8764:"-45-2356-",8801:"-2356-2356-",8802:"-46-2356-2356-",8810:"-5-5-126-",8811:"-5-5-345-",8771:"-5-2356-",8778:"-456-5-2356-",8723:"-36-235-",8727:"-5-35-",8728:"-456-3456-",8729:"-35-35-",8826:"-46-46-126-",8827:"-46-46-345-",8828:"-45-45-126-",8829:"-45-45-345-",8917:"-5-2356-",8721:"-46-6-234-",8719:"-46-6-1234-",913:"-46-6-1-",914:"-46-6-12-",915:"-46-6-1245-",916:"-46-6-145-",917:"-46-6-15-",918:"-46-6-1356-",919:"-46-6-125-",920:"-46-6-245-",921:"-46-6-24-",922:"-46-6-13-",923:"-46-6-123-",924:"-46-6-134-",925:"-46-6-1345-",926:"-46-6-1346-",927:"-46-6-135-",928:"-46-6-1234-",929:"-46-6-1235-",931:"-46-6-234-",932:"-46-6-2345-",933:"-46-6-136-",934:"-46-6-124-",935:"-46-6-12345-",936:"-46-6-13456-",937:"-46-6-2456-",945:"-46-1-",946:"-46-12-",947:"-46-1245-",948:"-46-145-",949:"-46-15-",950:"-46-1356-",951:"-46-125-",952:"-46-245-",953:"-46-24-",954:"-46-13-",955:"-46-123-",956:"-46-134-",957:"-46-1345-",958:"-46-1346-",959:"-46-135-",960:"-46-1234-",961:"-46-1235-",963:"-46-234-",964:"-46-2345-",965:"-46-136-",966:"-46-124-",967:"-46-12345-",968:"-46-13456-",969:"-46-2456-",8592:"-1246-246-25-25-",8593:"-1246-126-25-25-135-",8594:"-1246-25-25-135-",8595:"-1246-146-25-25-135-",8596:"-1246-246-25-25-135-",8598:"-1246-45-246-25-25-",8599:"-1246-45-25-25-135-",8600:"-1246-56-25-25-135-",8601:"-1246-56-246-25-25-",8614:"-5-156-",8644:"-456-12456-",8653:"-46-5-25-",8655:"-46-25-2-",8656:"-1246-246-2356-2356-",8658:"-1246-2356-2356-135-",8660:"-1246-246-2356-2356-135-"}}},ueb:{TBdbt:{" ":"BLANK",a:1,b:12,c:14,d:145,e:15,f:124,g:1245,h:125,i:24,j:245,k:13,l:123,m:134,n:1345,o:135,p:1234,q:12345,r:1235,s:234,t:2345,u:136,v:1236,w:2456,x:1346,y:13456,z:1356,"&":12346,"=":123456,"(":12356,"!":2346,")":23456,"*":16,"<":126,"%":146,":":156,$:1246,"]":12456,"\\":1256,"[":246,1:2,2:23,3:25,4:256,5:26,6:235,7:2356,8:236,9:35,0:356,"/":34,"+":346,"#":3456,">":345,"'":3,"-":36,"@":4,"^":45,_:456,'"':5,".":46,";":56,",":6},mathBraille:{caracMath:{coupureFormule:"5",espaceInsecable:"-BLANK-",separateurIndiceExposant:{virgule:"-246-",pointvirgule:"-456-246-"},indicateurNumerique:"-3456-",indicateurFraction:{simple:{open:"",close:""},complexe:{open:"-12356-",close:"-23456-"},hypercomplexe:{open:"-6-6-1456-",close:"-6-6-3456-"},fractionnaire:{open:"",close:""}},fraction:{simple:{oblique:"-34-",horizontale:"-46-34-"},fractionnaire:{oblique:"-34-",horizontale:"-46-34-"},complexe:{oblique:"-6-456-34-",horizontale:"-46-34-"},hypercomplexe:{horizontale:"-6-6-34-"}},blocks:{open:"-1-2-6-",close:"-3-4-5-"},parenthese:{open:"-5-126-",close:"-5-345-"},grandeparenthese1:{open:"-5-126-",close:"-5-345-"},grandeparenthese2:{open:"-6-5-126-",close:"-6-5-345-"},accolade:{open:"-456-126-",close:"-456-345-"},grandeaccolade:{open:"-6-456-126-",close:"-6-456-345-"},barre:{open:"-456-1256-",close:"-456-1256-"},grandebarre:{open:"-6-456-1256-",close:"-6-456-1256-"},doublebarre:{open:"-1256-1256-",close:"-1256-1256-"},grandedoublebarre:{open:"-46-123456-",close:"-46-123456-"},crochet:{open:"-46-126-",close:"-46-345-"},grandcrochet1:{open:"-46-126-",close:"-46-345-"},grandcrochet2:{open:"-6-46-126-",close:"-6-46-345-"},crochetdouble:{open:"-46-12356-",close:"-46-23456-"},indice:"-26-",exposant:"-35-",suscrit:"-35-",souscrit:"-26-",matrice:{sepLigne:"-6-345-"},racine:"-345-",finRacine:"-12456-",ordreRadical:"-46-",indiceRadical:"-126-",majuscule:"-6-",indicateurBase:"-5-",majusculeronde:"-46-5-"},caracDec:{susouscrit:{8594:"-46-25-",175:"-456-25-",732:"-5-456-25-",8994:"-4-25-",94:"-45-25-"},65:"-6-1-",66:"-6-12-",67:"-6-14-",68:"-6-145-",69:"-6-15-",70:"-6-124-",71:"-6-1245-",72:"-6-125-",73:"-6-24-",74:"-6-245-",75:"-6-13-",76:"-6-123-",77:"-6-134-",78:"-6-1345-",79:"-6-135-",80:"-6-1234-",81:"-6-12345-",82:"-6-1235-",83:"-6-234-",84:"-6-2345-",85:"-6-136-",86:"-6-1236-",87:"-6-2456-",88:"-6-1346-",89:"-6-13456-",90:"-6-1356-",97:"-1-",98:"-12-",99:"-14-",100:"-145-",101:"-15-",102:"-124-",103:"-1245-",104:"-125-",105:"-24-",106:"-245-",107:"-13-",108:"-123-",109:"-134-",110:"-1345-",111:"-135-",112:"-1234-",113:"-12345-",114:"-1235-",115:"-234-",116:"-2345-",117:"-136-",118:"-1236-",119:"-2456-",120:"-1346-",121:"-13456-",122:"-1356-",48:"-245-",49:"-1-",50:"-12-",51:"-14-",52:"-145-",53:"-15-",54:"-124-",55:"-1245-",56:"-125-",57:"-24-",39:"-2356-",40:"-5-126-",41:"-5-345-",58:"-25-",59:"-23-",91:"-46-126-",93:"-46-345-",123:"-456-126-",125:"-456-345-",124:"-456-1256-",8214:"-1256-1256-",44:"-2-",45:"-5-36-",46:"-256-",42:"-4-3456-",43:"-5-235-",47:"-456-34-",37:"-46-356-",61:"-BLANK-5-2356-BLANK-",33:"-12346-",183:"-5-256-",176:"-45-245-",181:"-45-134-",60:"-BLANK-4-126-BLANK-",62:"-BLANK-4-345-BLANK-",8804:"-BLANK-456-4-126-BLANK-",10877:"-BLANK-456-4-126-BLANK-",10878:"-BLANK-456-4-345-BLANK-",8805:"-BLANK-456-4-345-BLANK-",177:"-456-235-",8800:"-BLANK-5-2356-4-156-BLANK-",247:"-5-34-",215:"-5-236-",8722:"-5-36-",8725:"-456-34-",8260:"-456-34-",8734:"-45-14-",8242:"-2356-",8243:"-2356-2356-",8244:"-2356-2356-2356-",8901:"-35-",8853:"-46-235-",8855:"-46-35-",8747:"-2346-",8706:"-5-145-",8710:"-46-45-145-",8711:"-46-1456-",8748:"-2346-2346-",8749:"-2346-2346-2346-",10764:"-2346-2346-2346-2346-",8750:"-2346-6-1246-14-12456-",8751:"-46-12346-12346-",8752:"-46-12346-12346-12346-",8477:"-46-46-1235-",8450:"-46-46-14-",8469:"-46-46-1345-",8473:"-46-46-1234-",8474:"-46-46-12345-",8484:"-46-46-1356-",8704:"-4-12346-",8705:"-46-146-",8707:"-4-123456-",8708:"-46-456-16-",8709:"-45-3456-",8743:"-45-35-",8744:"-45-26-",8745:"-45-235-",8746:"-456-235-",8712:"-45-16-",8713:"-45-34-",8714:"-45-16-",8715:"-46-45-16-",8716:"-46-45-34-",8717:"-46-45-16-",8834:"-46-16-",8835:"-5-16-",8836:"-46-34-",8837:"-5-34-",8838:"-456-46-16-",8741:"-456-1256-",8742:"-46-456-1256-",8869:"-45-1256-",8756:"-6-16-",8757:"-4-34-",8733:"-BLANK-456-5-2356-BLANK-",8773:"-BLANK-5-456-35-BLANK-",8776:"-BLANK-45-35-BLANK-",8777:"-46-5-2356-",8764:"-45-2356-",8801:"-BLANK-456-123456-BLANK-",8802:"-46-2356-2356-",8810:"-BLANK-46-4-126-BLANK-",8811:"-BLANK-46-4-345-BLANK-",8771:"-BLANK-456-35-BLANK-",8778:"-456-5-2356-",8723:"-456-36-",8727:"-5-35-",8728:"-456-3456-",8729:"-35-35-",8758:"-25-",8783:"-45-5-2356-",8785:"-46-5-2356-",8826:"-46-46-126-",8827:"-46-46-345-",8828:"-45-45-126-",8829:"-45-45-345-",8917:"-5-2356-",8721:"-46-6-234-",8719:"-46-6-1234-",913:"-46-6-1-",914:"-46-6-12-",915:"-46-6-1245-",916:"-46-6-145-",917:"-46-6-15-",918:"-46-6-1356-",919:"-46-6-125-",920:"-46-6-245-",921:"-46-6-24-",922:"-46-6-13-",923:"-46-6-123-",924:"-46-6-134-",925:"-46-6-1345-",926:"-46-6-1346-",927:"-46-6-135-",928:"-46-6-1234-",929:"-46-6-1235-",931:"-46-6-234-",932:"-46-6-2345-",933:"-46-6-136-",934:"-46-6-124-",935:"-46-6-12345-",936:"-46-6-13456-",937:"-46-6-2456-",945:"-46-1-",946:"-46-12-",947:"-46-1245-",948:"-46-145-",949:"-46-15-",950:"-46-1356-",951:"-46-125-",952:"-46-245-",953:"-46-24-",954:"-46-13-",955:"-46-123-",956:"-46-134-",957:"-46-1345-",958:"-46-1346-",959:"-46-135-",960:"-46-1234-",961:"-46-1235-",963:"-46-234-",964:"-46-2345-",965:"-46-136-",966:"-46-124-",967:"-46-12345-",968:"-46-13456-",969:"-46-2456-",8592:"-1246-246-25-25-",8593:"-1246-126-25-25-135-",8594:"-1246-25-25-135-",8595:"-1246-146-25-25-135-",8596:"-1246-246-25-25-135-",8598:"-1246-45-246-25-25-",8599:"-1246-45-25-25-135-",8600:"-1246-56-25-25-135-",8601:"-1246-56-246-25-25-",8614:"-5-156-",8644:"-456-12456-",8653:"-46-5-25-",8655:"-46-25-2-",8656:"-1246-246-2356-2356-",8658:"-1246-2356-2356-135-",8660:"-1246-246-2356-2356-135-"}}}};!function(exports,undefined){"use strict";String.prototype.isNumeric=function(){if(-1===Math.sign(this))return!1;let n=this.replace(/\./g,"").replace(",",".").replace(/\n|\r|\t|\s/g,"");return!isNaN(parseFloat(n))&&isFinite(n)},String.prototype.trimCar=function(car){let deb=new RegExp("^"+car),fin=new RegExp(car+"$");return this.replace(deb,"").replace(fin,"")},String.prototype.trimall=function(){return this.replace(/\s*/gi,"")},String.prototype.braille=function(maTable){let maString=this.trimCar("-");for(var brailleUnicode={BLANK:10240,1:10241,12:10243,123:10247,1234:10255,12345:10271,123456:10303,1234567:10367,12345678:10495,1234568:10431,123457:10335,1234578:10463,123458:10399,12346:10287,123467:10351,1234678:10479,123468:10415,12347:10319,123478:10447,12348:10383,1235:10263,12356:10295,123567:10359,1235678:10487,123568:10423,12357:10327,123578:10455,12358:10391,1236:10279,12367:10343,123678:10471,12368:10407,1237:10311,12378:10439,1238:10375,124:10251,1245:10267,12456:10299,124567:10363,1245678:10491,124568:10427,12457:10331,124578:10459,12458:10395,1246:10283,12467:10347,124678:10475,12468:10411,1247:10315,12478:10443,1248:10379,125:10259,1256:10291,12567:10355,125678:10483,12568:10419,1257:10323,12578:10451,1258:10387,126:10275,1267:10339,12678:10467,1268:10403,127:10307,1278:10435,128:10371,13:10245,134:10253,1345:10269,13456:10301,134567:10365,1345678:10493,134568:10429,13457:10333,134578:10461,13458:10397,1346:10285,13467:10349,134678:10477,13468:10413,1347:10317,13478:10445,1348:10381,135:10261,1356:10293,13567:10357,135678:10485,13568:10421,1357:10325,13578:10453,1358:10389,136:10277,1367:10341,13678:10469,1368:10405,137:10309,1378:10437,138:10373,14:10249,145:10265,1456:10297,14567:10361,145678:10489,14568:10425,1457:10329,14578:10457,1458:10393,146:10281,1467:10345,14678:10473,1468:10409,147:10313,1478:10441,148:10377,15:10257,156:10289,1567:10353,15678:10481,1568:10417,157:10321,1578:10449,158:10385,16:10273,167:10337,1678:10465,168:10401,17:10305,178:10433,18:10369,2:10242,23:10246,234:10254,2345:10270,23456:10302,234567:10366,2345678:10494,234568:10430,23457:10334,234578:10462,23458:10398,2346:10286,23467:10350,234678:10478,23468:10414,2347:10318,23478:10446,2348:10382,235:10262,2356:10294,23567:10358,235678:10486,23568:10422,2357:10326,23578:10454,2358:10390,236:10278,2367:10342,23678:10470,2368:10406,237:10310,2378:10438,238:10374,24:10250,245:10266,2456:10298,24567:10362,245678:10490,24568:10426,2457:10330,24578:10458,2458:10394,246:10282,2467:10346,24678:10474,2468:10410,247:10314,2478:10442,248:10378,25:10258,256:10290,2567:10354,25678:10482,2568:10418,257:10322,2578:10450,258:10386,26:10274,267:10338,2678:10466,268:10402,27:10306,278:10434,28:10370,3:10244,34:10252,345:10268,3456:10300,34567:10364,345678:10492,34568:10428,3457:10332,34578:10460,3458:10396,346:10284,3467:10348,34678:10476,3468:10412,347:10316,3478:10444,348:10380,35:10260,356:10292,3567:10356,35678:10484,3568:10420,357:10324,3578:10452,358:10388,36:10276,367:10340,3678:10468,368:10404,37:10308,378:10436,38:10372,4:10248,45:10264,456:10296,4567:10360,45678:10488,4568:10424,457:10328,4578:10456,458:10392,46:10280,467:10344,4678:10472,468:10408,47:10312,478:10440,48:10376,5:10256,56:10288,567:10352,5678:10480,568:10416,57:10320,578:10448,58:10384,6:10272,67:10336,678:10464,68:10400,7:10304,78:10432,8:10368},tmpTable=maTable&&maTable||brailleUnicode,txt=maTable&&maString.split("")||maString.split("-"),l=txt.length,i=0;i!==l;i++){if(!tmpTable[txt[i]])return'caractère "'+txt[i]+" ; "+txt[i].charCodeAt()+'" non défini';maTable&&txt.splice(i,1,brailleUnicode[maTable[txt[i]]])||txt.splice(i,1,brailleUnicode[txt[i]])}return String.fromCharCode.apply(String,txt)},HTMLElement.prototype.hasParent=function(parentTagname){for(var l=(parentTagname=Array.isArray(parentTagname)&&parentTagname||[parentTagname]).length,parent,parentTag,i=0;i!==l;i++)for(parentTag=(parent=this.parentElement).tagName.toLowerCase();parent&&"math"!==parentTag;){if(parent.tagName.toLowerCase()===parentTagname[i])return!0;parentTag=(parent=parent.parentElement).tagName.toLowerCase()}return!1},Object.prototype.hasChild=function(parentTagname){for(var l=(parentTagname=Array.isArray(parentTagname)&&parentTagname||[parentTagname]).length,i=0;i!==l;i++){var node;if(this.getElementsByTagName(parentTagname[i])[0]||this.tagName.toLowerCase()===parentTagname[i])return!0}return!1};var mesFonctions={hasParent:function(element,parentTagname){for(var l=(parentTagname=Array.isArray(parentTagname)&&parentTagname||[parentTagname]).length,parent,parentTag,i=0;i!==l;i++)for(parentTag=(parent=element.parentElement).tagName.toLowerCase();parent&&"math"!==parentTag;){if(parent.tagName.toLowerCase()===parentTagname[i])return!0;parentTag=(parent=parent.parentElement).tagName.toLowerCase()}return!1},hasChild:function(element,parentTagname){for(var l=(parentTagname=Array.isArray(parentTagname)&&parentTagname||[parentTagname]).length,i=0;i!==l;i++){var node;if(element.getElementsByTagName(parentTagname[i])[0]||element.tagName.toLowerCase()===parentTagname[i])return!0}return!1},nbChildrens:function(element){return element.querySelectorAll("*").length},getElementsByContainTagName:function(element,tag){tag=Array.isArray(tag)&&tag||[tag];for(var a=[],n=element.getElementsByTagName("*"),l=n.length,i=0;i!==l;i++)for(var node=n[i].tagName.toUpperCase(),ltag=tag.length,j=0;j!==ltag;j++)tag[j]=tag[j].toUpperCase(),-1!==node.indexOf(tag[j])&&a.push(n[i]);return a},block:function(element,openBloc,endBloc){void 0===openBloc&&(openBloc=mathBraille.caracMath.blocks.open),void 0===endBloc&&(endBloc=mathBraille.caracMath.blocks.close);var df=document.createElement("bloc"),blocOuverture=document.createElement("blocOuverture"),blocFermeture=document.createElement("blocFermeture");return blocOuverture.appendChild(document.createTextNode(openBloc)),blocFermeture.appendChild(document.createTextNode(endBloc)),df.appendChild(blocOuverture),df.appendChild(document.createTextNode("\n")),df.appendChild(element),df.appendChild(document.createTextNode("\n")),df.appendChild(blocFermeture),df},_extendDefaults:function(source,properties){var property;for(property in properties)properties.hasOwnProperty(property)&&(source[property]=properties[property]);return source}},optionsBraille={},hardmat,mbraille=function(clmath){this._mesFonctions=mesFonctions,this._writeEq=writeEq,optionsBraille={remplaceFormule:!1,coupureFormule:0,codeBrailleMath:"fr",codeSysteme:"SI",matriceLineaire:!1,maxCaracCell:10,chimie:!1},clmath?"object"==typeof clmath?(optionsBraille=mesFonctions._extendDefaults(optionsBraille,clmath),clmath="math"):arguments[1]&&"object"==typeof arguments[1]&&(optionsBraille=mesFonctions._extendDefaults(optionsBraille,arguments[1])):clmath="math";var mesFormules=clmath&&document.querySelectorAll(clmath),l=mesFormules.length,i=0;for(this._formules=mesFormules;i!==l;i++){mathBraille=allVar[optionsBraille.codeBrailleMath].mathBraille,mesFormules[i].setAttribute("aria-hidden",!0);var parent=mesFormules[i].parentNode,m=document.createElement("math"),maForm=document.createElement("span");m.innerHTML=mesFormules[i].innerHTML,writeEq._supprimeprefix(m),writeEq._superflus(m),writeEq._inutile(m),writeEq._tableSeul(m),writeEq._mspace(m),writeEq._espace(m),optionsBraille.chimie&&writeEq._moverChimie(m),optionsBraille.chimie&&writeEq._munderChimie(m),optionsBraille.chimie&&writeEq._munderoverChimie(m),"nemeth"===optionsBraille.codeBrailleMath&&(writeEq._numDecimalNemeth(m),writeEq._espaceNemeth(m)),hardmat=writeEq._boolHardMatrice(m),writeEq._ajoutmfenced(m),writeEq._pbBlocs(m),writeEq._pbIntegrale(m),writeEq._newMfracBloc(m),writeEq._newMsqrtBloc(m),writeEq._newMrootBloc(m),writeEq._reecritureMultiscripts(m),writeEq._newMmultiscriptsBloc(m),writeEq._newMsubsupBloc(m),writeEq._newMunderover(m),writeEq._newMsupBloc(m),writeEq._newMsubBloc(m),writeEq._newPlacementMultiscript(m),writeEq._newMfracWrite(m),writeEq._newMsqrtWrite(m),writeEq._newMrootWrite(m),writeEq._newIndiceExposantWrite(m),writeEq._newBlocBase(m),writeEq._mover(m,"mover"),writeEq._munder(m),writeEq._mfenced(m),writeEq._mn(m),writeEq._mo(m),writeEq._mi(m),writeEq._mtext(m),(optionsBraille.matriceLineaire||hardmat)&&writeEq._matriceLineaire(m),writeEq._writeform(m),maForm.innerHTML=m.innerHTML,maForm.classList.add("js-mathmlConverti"),parent.insertBefore(maForm,mesFormules[i].nextSibling),optionsBraille.remplaceFormule?mesFormules[i].setAttribute("style","display:none"):mesFormules[i].removeAttribute("style")}},brailledirect=function(maClass,codeBrailleMath){codeBrailleMath=codeBrailleMath&&codeBrailleMath||"fr";for(var tbf6=document.querySelectorAll(maClass),l=tbf6.length,i=0;i!==l;i++){var maTable=allVar[codeBrailleMath].TBdbt;tbf6[i].textContent=tbf6[i].textContent.braille(maTable)}},mathBraille={};const braillemarqueCell="-124578-",braillemarqueMat="-1234567-",braillemarqueClose="-1278-",braillemarqueRetourLigne="-12345678-",marqueCell="-124578-".braille(),marqueMat="-1234567-".braille(),marqueClose="-1278-".braille(),marqueRetourLigne="-12345678-".braille(),espace=String.fromCharCode(10240);let writeEq={_munderoverChimie:function(monEquation){for(var munderover=monEquation.getElementsByTagName("munderover"),i=0,l=munderover.length;i<l;i++){let parent=munderover[i].parentNode,elt=munderover[i].children;if(8652===elt[0].textContent.trim().charCodeAt()){let mfenced=document.createElement("mfenced"),mrow=document.createElement("mrow");mfenced.appendChild(elt[2]),mfenced.appendChild(document.createTextNode("-23-")),mfenced.appendChild(elt[1]),mrow.appendChild(elt[0]),mrow.appendChild(mfenced),parent.replaceChild(mrow,munderover[i])}}},_moverChimie:function(monEquation){for(var mover=monEquation.getElementsByTagName("mover"),i=mover.length;i--;){let elt=mover[i].children,parent=mover[i].parentNode;if(8652===elt[0].textContent.trim().charCodeAt()){let mfenced=document.createElement("mfenced"),mrow=document.createElement("mrow");mfenced.appendChild(elt[1]),mfenced.appendChild(document.createTextNode("-23-")),mfenced.appendChild(document.createTextNode("-5-2-")),mrow.appendChild(elt[0]),mrow.appendChild(mfenced),parent.replaceChild(mrow,mover[i])}else if("mi"===elt[1].tagName.toLowerCase()){let mfenced=document.createElement("mfenced"),mi=document.createElement("mi");mi.innerHTML=elt[1].innerHTML,mfenced.appendChild(mi),mover[i].replaceChild(mfenced,elt[1])}else{let mrow=document.createElement("mrow");mrow.appendChild(elt[0]),mrow.appendChild(elt[0]),parent.replaceChild(mrow,mover[i])}}},_munderChimie:function(monEquation){for(var mover=monEquation.getElementsByTagName("munder"),i=0,l=mover.length;i<l;i++){let elt;if("mo"===mover[i].children[1].tagName.toLowerCase()){let parent=mover[i].parentNode,mrow=document.createElement("mrow");mrow.innerHTML=mover[i].innerHTML,parent.replaceChild(mrow,mover[i])}}},_mspace:function(monEquation){for(var space=monEquation.getElementsByTagName("mspace");space[0];){var parent=space[0].parentNode,mtext=document.createElement("mi");mtext.textContent=" ",parent.replaceChild(mtext,space[0])}},_espace:function(monEquation){var mtext;monEquation.querySelectorAll("mtext").forEach(t=>{160===t.textContent.charCodeAt()&&(t.textContent=" ")})},_numDecimalNemeth:function(monEquation){for(var mo=monEquation.getElementsByTagName("mo"),lmo=mo.length,i=0;i!==lmo;i++){var elt=mo[i];if(","===elt.textContent.trim()&&"SI"===optionsBraille.codeSysteme)if("mn"===elt.previousElementSibling.tagName.toLowerCase()&&"mn"===elt.nextElementSibling.tagName.toLowerCase())elt.textContent=".";else if(160!==elt.nextElementSibling.textContent.charCodeAt()){var bloc=document.createElement("space-bloc"),parent=elt.parentNode;bloc.appendChild(document.createTextNode(mathBraille.caracMath.espaceInsecable)),parent.insertBefore(bloc,elt.nextSibling)}}},_espaceNemeth:function(monEquation){for(var bloc,mo=monEquation.getElementsByTagName("mo"),lmo=mo.length,i=0;i!==lmo;){var boolparent=mesFonctions.hasParent(mo[i],["msub","msup"]);if(160===mo[i].textContent.charCodeAt()&&!boolparent){var parent=mo[i].parentNode;(bloc=document.createElement("space-bloc")).appendChild(document.createTextNode(mathBraille.caracMath.espaceInsecable)),parent.replaceChild(bloc,mo[i]),lmo--,i--}i++}},_pbIntegrale:function(monEquation){for(var subsup=monEquation.getElementsByTagName("msubsup"),lsubsup=subsup.length,i=0;i!==lsubsup;i++){var enfants=subsup[i].children,next=subsup[i].nextElementSibling,parent=subsup[i].parentNode;if(8747===enfants[0].textContent.charCodeAt()&&"mn"===next.tagName.toLowerCase()){for(parent.insertBefore(document.createTextNode(mathBraille.caracMath.blocks.open),subsup[i].nextSibling);next&&"d"!==next.textContent;)next=next.nextElementSibling;next&&"mi"===next.nextElementSibling.tagName&&parent.insertBefore(document.createTextNode(mathBraille.caracMath.blocks.close),next)}}},_pbBlocs:function(monEquation){for(var zap=["msub","msup"],qui=["cos","sin","lim","ch","sh","ln","log","Card","tan","arctan","arcsin","arccos","arccotan"],mi=monEquation.getElementsByTagName("mi"),lmi=mi.length,i=0;i!==lmi;i++){var txt=mi[i].textContent.trimall(),parent=mi[i].parentNode,first,last,lastprevious;if(-1!==qui.indexOf(txt)){if("lim"===txt){for(;"munder"!==parent.tagName.toLowerCase();)parent=parent.parentNode;if("mfrac"===parent.nextElementSibling.tagName.toLowerCase()){var frac=parent.nextElementSibling;parent=parent.parentNode;var bloc=document.createElement("mfrac");bloc.innerHTML=frac.innerHTML,parent.replaceChild(mesFonctions.block(bloc),frac)}continue}if(-1===zap.indexOf(parent.tagName.toLowerCase())&&(parent=mi[i]),last=first=parent.nextElementSibling,first&&"mfenced"===first.tagName.toLowerCase()||first&&-1!==first.textContent.indexOf("(")||first&&mesFonctions.nbChildrens(first)>1)continue;if("mfrac"===parent.nextElementSibling.tagName.toLowerCase()){frac=parent.nextElementSibling,parent=parent.parentNode,(bloc=document.createElement("mfrac")).innerHTML=frac.innerHTML,parent.replaceChild(mesFonctions.block(bloc),frac);continue}for(;last&&"mo"!==last.tagName.toLowerCase()&&1===last.textContent.trimall().length;)lastprevious=last,last=last.nextElementSibling;last?(last=last.previousElementSibling,parent.parentNode.insertBefore(document.createTextNode(mathBraille.caracMath.blocks.open),first),parent.parentNode.insertBefore(document.createTextNode(mathBraille.caracMath.blocks.close),last.nextSibling)):lastprevious&&(parent.parentNode.insertBefore(document.createTextNode(mathBraille.caracMath.blocks.open),first),parent.parentNode.insertBefore(document.createTextNode(mathBraille.caracMath.blocks.close),lastprevious.nextSibling))}}},_tableSeul:function(monEquation){var tbl=monEquation.getElementsByTagName("mtable"),bloc=document.createElement("mtable-bloc");if(tbl.length>0&&1===monEquation.children.length){var Tagenfant=monEquation.children[0].tagName,parent=tbl[0].parentNode;if("mtable"===Tagenfant.toLowerCase()){for(var tr=tbl[0].getElementsByTagName("mtr"),ltr=tr.length,i=0;i!==ltr;i++)i!==ltr-1&&tr[i].appendChild(document.createTextNode("-12345678-"));for(;tr[0];)bloc.appendChild(tr[0]);parent.replaceChild(bloc,tbl[0])}}},_boolHardMatrice:function(monEquation){var tbl=monEquation.getElementsByTagName("mtable");if(tbl.length>1)return!0;if(0===tbl.length)return!1;for(var td=tbl[0].getElementsByTagName("mtd"),ltd=td.length,i=0,tailleCell=0;i!==ltd;i++){var t=td[i].textContent.replace(/\s*/gi,"").length;tailleCell<=t&&(tailleCell=t)}return tailleCell>=optionsBraille.maxCaracCell},_supprimeprefix:function(monEquation){let mesDom;monEquation.querySelectorAll("*").forEach(dom=>{let tag=dom.tagName.split(":"),parent=dom.parentNode;if(tag.length>1){let tmp=document.createElement(tag[1]);tmp.innerHTML=dom.innerHTML,parent.replaceChild(tmp,dom)}})},_inutile:function(monEquation){for(var mesTags=["annotation-xml","annotation"],l=mesTags.length,i=0;i!==l;i++)for(var inutile=monEquation.getElementsByTagName(mesTags[i]);inutile[0];){var parent;inutile[0].parentNode.removeChild(inutile[0])}},_superflus:function(monEquation){let mesTags=["mstyle","annotation"],l=mesTags.length,i=0,df=document.createDocumentFragment();for(;i!==l;i++){let superflus=monEquation.getElementsByTagName(mesTags[i]);for(;superflus[0];){let enfants=superflus[0].children,parent=superflus[0].parentNode,mrow=document.createElement("mrow");for(;enfants[0];)mrow.appendChild(enfants[0]);parent.replaceChild(mrow,superflus[0])}}},_ajoutmfenced:function(monEquation){let mo=monEquation.querySelectorAll("mo");const paraOpen=["(","[","{","|","‖"],paraClose=[")","]","}","|","‖"];mo.forEach(m=>{let fenced=document.createElement("mfenced"),parent=m.parentNode,i=paraOpen.indexOf(m.textContent),next=m.nextElementSibling;-1!==i&&m.nextElementSibling&&("mtable"===m.nextElementSibling.tagName.toLowerCase()||mesFonctions.hasChild(m.nextElementSibling,"mtable"))&&(fenced.setAttribute("open",paraOpen[i]),fenced.setAttribute("close",""),fenced.appendChild(m.nextElementSibling),m.nextElementSibling&&m.nextElementSibling.textContent===paraClose[i]&&(fenced.setAttribute("close",paraClose[i]),parent.removeChild(m.nextElementSibling)),parent.replaceChild(fenced,m))})},_reecritureMultiscripts:function(eq){let multis;eq.querySelectorAll("mmultiscripts").forEach(m=>{let multi=m.children,elts=[];"mprescripts"===multi[1].tagName.toLowerCase()?(elts.push(document.createElement("none")),elts.push(document.createElement("none")),elts.push(multi[1]),elts.push(multi[2]),elts.push(multi[3])):(elts.push(multi[1]),elts.push(multi[2]),elts.push(multi[3]),elts.push(multi[4]),elts.push(multi[5])),elts.forEach(elt=>m.appendChild(elt))})},_newMmultiscriptsBloc:function(eq){for(var multiscripts=eq.getElementsByTagName("mmultiscripts"),lmultiscripts=multiscripts.length,i=0;i!==lmultiscripts;i++){for(var elts=multiscripts[i].children,monMulti=document.createElement("mmultiscripts"),k=0,lelts=elts.length;k!==lelts;k++){var lvl=writeEq._newNiveauIndiceExposant(elts[k]),id=document.createElement(elts[k].tagName.toLowerCase());if(id.innerHTML=elts[k].innerHTML,-1!==lvl){var bloc=document.createElement("blocmulti-"+lvl);writeEq._conditionsIndiceNum(elts[0],elts[1],lvl)&&1===k&&(bloc=document.createElement("blocIndiceNum-"+lvl)),bloc.appendChild(id),monMulti.appendChild(bloc)}else 0===k?((bloc=document.createElement("blocbase")).appendChild(id),monMulti.appendChild(bloc)):monMulti.appendChild(id)}multiscripts[i].innerHTML=monMulti.innerHTML}},_newPlacementMultiscript:function(eq){for(var multiscripts=eq.getElementsByTagName("mmultiscripts");multiscripts[0];){var parent=multiscripts[0].parentElement,bloc=document.createElement("mmultiscripts-f"),enfants=multiscripts[0].children;optionsBraille.chimie?(bloc.appendChild(enfants[0]),bloc.appendChild(document.createTextNode(mathBraille.caracMath.point6)),bloc.appendChild(enfants[3]),bloc.appendChild(document.createTextNode(mathBraille.caracMath.point6)),bloc.appendChild(enfants[3]),bloc.appendChild(enfants[0]),bloc.appendChild(enfants[0])):(bloc.appendChild(enfants[5]),bloc.appendChild(enfants[4]),bloc.appendChild(enfants[0]),bloc.appendChild(enfants[0]),bloc.appendChild(enfants[0])),(multiscripts[0].nextElementSibling||multiscripts[0].previousElementSibling)&&(bloc=mesFonctions.block(bloc)),parent.replaceChild(bloc,multiscripts[0])}},_mfenced:function(monEquation){for(var fenced=monEquation.getElementsByTagName("mfenced"),open,close,sep,mtable,parent,monBlock;fenced[0];){if(monBlock=document.createElement("mfenced-block"),null===(open=fenced[0].getAttribute("open"))&&(open="("),1===open.split("").length&&(open=open.charCodeAt()),null===(close=fenced[0].getAttribute("close"))&&(close=")"),1===close.split("").length&&(close=close.charCodeAt()),mtable=fenced[0].getElementsByTagName("mtable"),parent=fenced[0].parentNode,sep=fenced[0].getAttribute("separators")){var s=sep.split(""),slast,enfants=fenced[0].children,i=0;let row=document.createElement("mrow");for(;enfants[0];){let mo=document.createElement("mo");s[i]=s[i]||slast,mo.appendChild(document.createTextNode(s[i])),slast=s[i]&&s[i],row.appendChild(enfants[0]),enfants[0]&&row.appendChild(mo),i++}fenced[0].appendChild(row)}monBlock.innerHTML=fenced[0].innerHTML;var monBool=0!==mtable.length&&(optionsBraille.matriceLineaire||hardmat);switch(open){case 40:open=monBool&&mathBraille.caracMath.grandeparenthese2.open||mathBraille.caracMath.parenthese.open;break;case 91:open=monBool&&mathBraille.caracMath.grandcrochet2.open||mathBraille.caracMath.crochet.open;break;case 93:open=monBool&&mathBraille.caracMath.grandcrochet2.close||mathBraille.caracMath.crochet.close;break;case 123:open=monBool&&mathBraille.caracMath.grandeaccolade.open||""!==close&&mathBraille.caracMath.accolade.open||mathBraille.caracMath.grandeaccolade.open;break;case 8739:case 124:open=monBool&&mathBraille.caracMath.grandebarre.open||mathBraille.caracMath.barre.open;break;case 8214:case 8741:case"||":open=monBool&&mathBraille.caracMath.grandedoublebarre.open||mathBraille.caracMath.doublebarre.open;break;case 10214:open=mathBraille.caracMath.crochetdouble.open}switch(close){case 41:close=monBool&&mathBraille.caracMath.grandeparenthese2.close||mathBraille.caracMath.parenthese.close;break;case 93:close=monBool&&mathBraille.caracMath.grandcrochet2.close||mathBraille.caracMath.crochet.close;break;case 91:close=monBool&&mathBraille.caracMath.grandcrochet2.open||mathBraille.caracMath.crochet.open;break;case 125:close=monBool&&mathBraille.caracMath.grandeaccolade.close||mathBraille.caracMath.accolade.close;break;case 124:close=monBool&&mathBraille.caracMath.grandebarre.close||mathBraille.caracMath.barre.close;break;case 8214:case 8741:case"||":close=monBool&&mathBraille.caracMath.grandedoublebarre.close||mathBraille.caracMath.doublebarre.close;break;case 10215:close=mathBraille.caracMath.crochetdouble.close}!optionsBraille.matriceLineaire&&!hardmat&&writeEq._matriceBlock(open,close,monBlock),parent.replaceChild(mesFonctions.block(monBlock,open,close),fenced[0])}},_matriceBlock:function(open,close,monBlock){for(var tbl=monBlock.getElementsByTagName("mtable"),ltbl=tbl.length,parent,txtNode,tr,td,ltd,ltr,j,k,i=0;i!==ltbl;i++)for((parent=tbl[i].parentNode).insertBefore(document.createTextNode("-1234567-"),tbl[i]),close&&parent.insertBefore(document.createTextNode("-1278-"),tbl[i]),ltr=(tr=tbl[i].getElementsByTagName("mtr")).length,j=0;j!==ltr;j++)for(txtNode=close&&close+"-12345678-"+open||"-12345678-",j!==ltr-1&&tbl[i].insertBefore(document.createTextNode(txtNode),tr[j].nextSibling),ltd=(td=tr[j].getElementsByTagName("mtd")).length,k=0;k!==ltd;k++)parent=td[k].parentNode,0===td[k].textContent.trim().length&&td[k].appendChild(document.createTextNode(mathBraille.caracMath.matrice.caseVide)),k!==ltd-1&&parent.insertBefore(document.createTextNode(mathBraille.caracMath.espaceInsecable),td[k].nextSibling),parent.insertBefore(document.createTextNode("-124578-"),td[k].nextSibling),parent.insertBefore(document.createTextNode("-124578-"),td[k]);return monBlock},_matriceLineaire:function(monEquation){for(var tbl=monEquation.getElementsByTagName("mtable"),ltbl=tbl.length,tr,td,ltd,ltr,j,k,i=0;i!==ltbl;i++){for(ltr=(tr=tbl[i].getElementsByTagName("mtr")).length,j=0;j!==ltr;j++)j!==ltr-1&&tr[j].appendChild(document.createTextNode(mathBraille.caracMath.matrice.sepLigne+mathBraille.caracMath.espaceInsecable));for(ltd=(td=tbl[i].getElementsByTagName("mtd")).length,k=0;k!==ltd;k++)0===td[k].textContent.trim().length&&td[k].appendChild(document.createTextNode(mathBraille.caracMath.matrice.caseVide)),k!==ltd-1&&td[k].appendChild(document.createTextNode(mathBraille.caracMath.espaceInsecable))}},_newMsubsupBloc:function(eq,tag){tag=tag&&tag||"msubsup";let msubsup=eq.getElementsByTagName(tag),nomBloc="munderover"===tag?"blocunderover-":"blocsubsup-",indicateurBase=mathBraille.caracMath.indicateurBase&&mathBraille.caracMath.indicateurBase||"";for(;msubsup[0];){let parent=msubsup[0].parentNode,bloc=document.createElement(tag+"-f"),lvlsub=writeEq._newNiveauIndiceExposant(msubsup[0].children[1]),lvlsup=writeEq._newNiveauIndiceExposant(msubsup[0].children[2]),blocsup=-1===lvlsup&&document.createElement("bloc")||document.createElement(nomBloc+lvlsup),blocsub=-1===lvlsub&&document.createElement("bloc")||document.createElement(nomBloc+lvlsub);blocsub=writeEq._conditionsIndiceNum(msubsup[0].children[0],msubsup[0].children[1],lvlsub)&&document.createElement("blocIndiceNum-"+lvlsub)||blocsub,blocsup.appendChild(msubsup[0].children[2]),blocsub.appendChild(msubsup[0].children[1]),bloc.appendChild(msubsup[0].children[0]),bloc.appendChild(blocsub),bloc.appendChild(blocsup),bloc=mesFonctions.block(bloc,"",indicateurBase),parent.replaceChild(bloc,msubsup[0])}},_majus:function(monEquation,tagName){for(var mn=monEquation.getElementsByTagName(tagName),l=mn.length,i=0;i!==l;i++){let scriptBool=mn[i].getAttribute("mathvariant")&&"script"===mn[i].getAttribute("mathvariant"),doubleStruckBool=mn[i].getAttribute("mathvariant")&&"double-struck"===mn[i].getAttribute("mathvariant");if(scriptBool&&(mn[i].textContent=mn[i].textContent.toLowerCase()),";"===mn[i].textContent.trim()&&optionsBraille.chimie)mn[i].textContent=mathBraille.caracMath.point6+mathBraille.caracDec[mn[i].textContent.trim().charCodeAt()];else if(" "===mn[i].textContent)mn[i].textContent=mathBraille.caracMath.espaceInsecable;else{var num=mn[i].textContent.length>1&&mn[i].textContent.trim().split("")||mn[i].textContent.split(""),carac="",lnum=num.length,j=0;for(mn[i].textContent="";j<lnum;j++){let moncar;moncar=optionsBraille.chimie?mathBraille.caracDec[num[j].charCodeAt()]&&mathBraille.caracDec[num[j].charCodeAt()].chimie?mathBraille.caracDec[num[j].charCodeAt()].chimie:mathBraille.caracDec[num[j].charCodeAt()]:mathBraille.caracDec[num[j].charCodeAt()]&&mathBraille.caracDec[num[j].charCodeAt()].math?mathBraille.caracDec[num[j].charCodeAt()].math:mathBraille.caracDec[num[j].charCodeAt()],carac=moncar||num[j],carac=scriptBool&&mathBraille.caracMath.majusculeronde+carac||carac,carac=doubleStruckBool&&mathBraille.caracMath.majuscule+carac||carac,mn[i].textContent+=carac}}}},_mi:function(monEquation){writeEq._majus(monEquation,"mi")},_mo:function(monEquation){writeEq._majus(monEquation,"mo")},_mtext:function(monEquation){writeEq._majus(monEquation,"mtext")},_mn:function(monEquation){if("ueb"===optionsBraille.codeBrailleMath)for(var moNum=[",","."],mn=monEquation.getElementsByTagName("mn"),l=mn.length,i=0;i!==l;i++){var parent=mn[i].parentNode,moAvant=mn[i].previousElementSibling;moAvant?moAvant&&-1===moNum.indexOf(moAvant.textContent.trim())&&parent.insertBefore(document.createTextNode(mathBraille.caracMath.indicateurNumerique),mn[i]):parent.insertBefore(document.createTextNode(mathBraille.caracMath.indicateurNumerique),mn[i])}writeEq._majus(monEquation,"mn")},_mover:function(monEquation,tagName){tagName=tagName||"mover";for(var mover=monEquation.getElementsByTagName(tagName),monbool=!1;mover[0];){var tbl;0!==mover[0].getElementsByTagName("mtable").length&&writeEq._tableUnder(mover[0]);var bloc=document.createElement(tagName+"bloc"),parent=mover[0].parentNode,elt=mover[0].children,carCode=String(elt[1].textContent.trim().charCodeAt()),sep="",myArray;if(-1!==Object.keys(mathBraille.caracDec.susouscrit).indexOf(carCode))"munder"===tagName.toLowerCase()&&bloc.appendChild(document.createTextNode(mathBraille.caracMath.majuscule)),bloc.appendChild(document.createTextNode(mathBraille.caracDec.susouscrit[carCode])),mesFonctions.hasChild(elt[0],"mo")&&"mfenced"!==elt[0].tagName.toLowerCase()&&bloc.appendChild(mesFonctions.block(elt[0]))||bloc.appendChild(elt[0]);else{var enfant1=elt[0],enfant2=elt[1];switch(tagName.toLowerCase()){case"mover":sep=mathBraille.caracMath.suscrit,optionsBraille.chimie&&(sep="");break;case"munder":sep=mathBraille.caracMath.souscrit,sep=optionsBraille.chimie&&mathBraille.caracMath.point6+sep||sep;break;case"mroot":mover[0].nextElementSibling&&"mo"!==mover[0].nextElementSibling.tagName.toLowerCase()&&(monbool=!0),sep=mathBraille.caracMath.racine,enfant1=elt[1],enfant2=elt[0],bloc.appendChild(document.createTextNode(mathBraille.caracMath.exposant))}mesFonctions.nbChildrens(enfant1)>1&&!enfant1.textContent.isNumeric()&&bloc.appendChild(mesFonctions.block(enfant1))||bloc.appendChild(enfant1),bloc.appendChild(document.createTextNode(sep)),mesFonctions.nbChildrens(enfant2)>1&&!enfant2.textContent.isNumeric()&&bloc.appendChild(mesFonctions.block(enfant2))||bloc.appendChild(enfant2)}bloc=monbool&&mesFonctions.block(bloc)||bloc,parent.replaceChild(bloc,mover[0])}},_tableUnder:function(under){for(var bloc=document.createElement("mrow"),tbl=under.getElementsByTagName("mtable"),tr=tbl[0].getElementsByTagName("mtr"),ltr=tr.length,j=0;j!==ltr;j++)j!==ltr-1&&tr[j].appendChild(document.createTextNode("-2-"));for(var parent=tbl[0].parentNode;tr[0];)bloc.appendChild(tr[0]);return parent.replaceChild(bloc,tbl[0]),under},_munder:function(monEquation){writeEq._mover(monEquation,"munder")},_newMunderover:function(eq){writeEq._newMsubsupBloc(eq,"munderover")},_newMfracBloc:function(eq){for(var mfrac=eq.getElementsByTagName("mfrac");mfrac[0];){var complexe=writeEq._boolFracComplexity(mfrac[0]),parent=mfrac[0].parentNode,bloc=document.createElement("mfrac-"+complexe),bevelled=mfrac[0].getAttribute("bevelled");bevelled&&bloc.setAttribute("bevelled",bevelled),bloc.innerHTML=mfrac[0].innerHTML,parent.replaceChild(bloc,mfrac[0])}},_newMfracWrite:function(eq){for(var mfrac=mesFonctions.getElementsByContainTagName(eq,"mfrac"),indicateurBase=mathBraille.caracMath.indicateurBase&&mathBraille.caracMath.indicateurBase||"",i=0,lmfrac=mfrac.length;i<lmfrac;i++){var element=mfrac[i],tagName=element.tagName.split("-"),bloc=document.createElement("bloc"),blocSep=document.createElement("sep"),mnamebloc=["msup","msub"],parent=element.parentNode,elt=element.children,enfant1=elt[0],enfant2=elt[1],boolEnfant1=2===enfant1.children.length&&enfant1.children[0].textContent.trimall().length>1,boolEnfant2=2===enfant2.children.length&&enfant2.children[0].textContent.trimall().length>1,sep="";if(mathBraille.caracMath.indicateurFraction){var indicFrac=mathBraille.caracMath.indicateurFraction[tagName[1]],open=indicFrac.open,close=indicFrac.close,bevelled;sep=element.getAttribute("bevelled")&&mathBraille.caracMath.fraction[tagName[1]].oblique||mathBraille.caracMath.fraction[tagName[1]].horizontale}else sep=mathBraille.caracMath.fraction;blocSep.appendChild(document.createTextNode(sep)),blocSep=-1!==mnamebloc.indexOf(enfant1.tagName.split("-")[0])&&mesFonctions.block(blocSep,indicateurBase,"")||blocSep,enfant1=mesFonctions.nbChildrens(enfant1)>1&&!boolEnfant1&&mesFonctions.block(enfant1)||enfant1,enfant2=mesFonctions.nbChildrens(enfant2)>1&&!boolEnfant2&&mesFonctions.block(enfant2)||enfant2,bloc.appendChild(enfant1),bloc.appendChild(blocSep),bloc.appendChild(enfant2),bloc=mathBraille.caracMath.indicateurFraction&&mesFonctions.block(bloc,open,close)||bloc,parent.replaceChild(bloc,element)}},_boolFracComplexity:function(frac){var numerateur=frac.children[0],denominateur=frac.children[1],num=numerateur.getElementsByTagName("mfrac"),denom=denominateur.getElementsByTagName("mfrac"),lnum=num.length,ldenom=denom.length,comp=["simple","complexe","hypercomplexe"],numcomp=0,parent;if(frac.previousElementSibling&&"mn"===frac.previousElementSibling.tagName.toLowerCase()&&"mfrac"!==frac.parentElement.tagName)return"fractionnaire";return"mfrac"!==numerateur.tagName.toLowerCase()&&0===lnum&&"mfrac"!==denominateur.tagName.toLowerCase()&&0===ldenom?-1!==numerateur.textContent.indexOf("/")||-1!==denominateur.textContent.indexOf("/")?"complexe":"simple":comp[numcomp=(numcomp=numcomp<writeEq._testEnfants(denominateur)&&writeEq._testEnfants(denominateur)||numcomp)<writeEq._testEnfants(numerateur)&&writeEq._testEnfants(numerateur)||numcomp]},_testEnfants:function(elt){var comp=0;if("mfrac"===elt.tagName.toLowerCase())comp="simple"===writeEq._boolFracComplexity(elt)?1:2;else if("msub"===elt.tagName.toLowerCase()||"msup"===elt.tagName.toLowerCase())comp=0;else for(var eltenfant=elt.children,i=0,leltenfant=eltenfant.length;i!==leltenfant;i++)"mfrac"===eltenfant[i].tagName.toLowerCase()&&(comp="simple"===writeEq._boolFracComplexity(eltenfant[i])||"fractionnaire"===writeEq._boolFracComplexity(eltenfant[i])?1:2);return comp},_countParent:function(monEquation,tagname){for(var nodeTag=monEquation.getElementsByTagName(tagname),parent=nodeTag[0]&&nodeTag[0].parentElement,k=0;parent&&"math"!==parent.tagname.toLowerCase();)k++,parent=parent.parentElement;return 0===k?1e4:k},_virguleNemeth:function(msub){for(var lmsub=msub.length,i=0;i!==lmsub;i++)for(var mo=msub[i].getElementsByTagName("mo"),lmo=mo.length,j=0,bloc,parent,bool;j!==lmo;){var elt=mo[j],nextElt=elt.nextElementSibling;switch(parent=elt.parentNode,bloc=document.createElement("mo-bloc"),bool=nextElt&&(160===nextElt.textContent.charCodeAt()||"-BLANK-"===nextElt.textContent),elt.textContent.charCodeAt()){case 44:bool&&bloc.appendChild(document.createTextNode(mathBraille.caracMath.separateurIndiceExposant.virgule)),bool&&parent.replaceChild(bloc,elt),"-BLANK-"===nextElt.textContent&&parent.removeChild(nextElt),lmo--,j--;break;case 59:bool&&bloc.appendChild(document.createTextNode(mathBraille.caracMath.separateurIndiceExposant.pointvirgule)),bool&&parent.replaceChild(bloc,elt),lmo--,j--}j++}},_newMsupBloc:function(eq){for(var msup=eq.getElementsByTagName("msup");msup[0];){var parent=msup[0].parentElement,lvl=writeEq._newNiveauIndiceExposant(msup[0].children[1]),bloc=document.createElement("msup-f"),bloc2=-1===lvl&&document.createElement("bloc")||document.createElement("blocsubsup-"+lvl);bloc.innerHTML=msup[0].innerHTML,bloc2.appendChild(bloc.children[1]),parent.replaceChild(bloc,msup[0]),bloc.appendChild(bloc2)}},_conditionsIndiceNum:function(elt1,elt2,lvl){var funcTrue=["log","sin","cos","arcsin","CO"],funcFalse;return-1===["∫"].indexOf(elt1.textContent.trimall())&&(!mesFonctions.hasChild(elt2,["msub","msup","msubsup","mmultiscripts","blocIndiceNum"])&&(!(elt1.textContent.trimall().split("").length>1&&-1===funcTrue.indexOf(elt1.textContent.trimall()))&&!(-1===lvl||1!==lvl.split("").length||elt1.textContent.trimall().isNumeric()||!elt2.textContent.trimall().isNumeric())))},_newMsubBloc:function(eq){for(var msub=eq.getElementsByTagName("msub");msub[0];){var parent=msub[0].parentElement,lvl=writeEq._newNiveauIndiceExposant(msub[0].children[1]),bloc=document.createElement("msub-f"),bloc2=-1===lvl&&document.createElement("bloc")||document.createElement("blocsubsup-"+lvl);bloc2=writeEq._conditionsIndiceNum(msub[0].children[0],msub[0].children[1],lvl)&&document.createElement("blocIndiceNum-"+lvl)||bloc2,bloc.innerHTML=msub[0].innerHTML,bloc2.appendChild(bloc.children[1]),parent.replaceChild(bloc,msub[0]),bloc.appendChild(bloc2)}},_newNiveauIndiceExposant:function(elt){var tagElt=elt.tagName.split("-")[0],exlu;if(-1!==["none","mmultiscripts","mprescripts"].indexOf(tagElt))return-1;for(var parent=elt.parentElement,tagName=parent.tagName.split("-"),enfant=elt,lvl="";"math"!==tagName[0].toLowerCase();){switch(tagName[0].toLowerCase()){case"msup":lvl+="e";break;case"msub":lvl+="i";break;case"mmultiscripts":var pos=writeEq._positionDansParent(enfant);2===pos||5===pos?lvl+="e":1!==pos&&4!==pos||(lvl+="i");break;case"munderover":case"msubsup":1===(pos=writeEq._positionDansParent(enfant))?lvl+="i":2===pos&&(lvl+="e")}enfant=parent,tagName=(parent=parent.parentElement).tagName.split("-")}return""===lvl?-1:lvl},_positionDansParent:function(elt){for(var parent,enfants=elt.parentElement.children,lenfants=enfants.length,i=0;i!==lenfants;i++)if(enfants[i]===elt)return i;return-1},_newIndiceExposantWrite:function(eq){for(var indExp=["msup","msub"],indice=mathBraille.caracMath.indice,exposant=mathBraille.caracMath.exposant,indicateurBase=mathBraille.caracMath.indicateurBase&&mathBraille.caracMath.indicateurBase||"",ie=mesFonctions.getElementsByContainTagName(eq,["blocsubsup","blocmulti","blocIndiceNum","blocunderover"]),lie,j=ie.length-1;-1!==j;j--){var elt=ie[j],tagName=elt.tagName.toLowerCase().split("-"),parent=elt.parentNode;if(tagName[1]&&("blocIndiceNum"!==tagName[0]||"fr"===optionsBraille.codeBrailleMath)){var boolFrChimie=optionsBraille.chimie&&"fr"===optionsBraille.codeBrailleMath&&!mesFonctions.hasParent(elt,["mmultiscripts-f","mmultiscripts"]),txt=tagName[1].split(""),bloc=(0===elt.children[0].children.length||indExp.indexOf(-1!==tagName[0]))&&document.createElement(elt.tagName.toLowerCase())||document.createElement("bloc"),indicBaseDom;if(bloc.innerHTML=elt.innerHTML,"blocunderover"===tagName[0]?(exposant=mathBraille.caracMath.suscrit,indice=mathBraille.caracMath.souscrit):(indice=!boolFrChimie&&mathBraille.caracMath.indice||"",exposant=mathBraille.caracMath.exposant),bloc=mesFonctions.nbChildrens(bloc.children[0])>1&&mesFonctions.block(bloc)||bloc,!elt.previousElementSibling||"|"!==elt.previousElementSibling.textContent.trim()){let k=0,ltext=txt.length;for(;k!==ltext&&(bloc="e"===txt[k].toLowerCase()&&mesFonctions.block(bloc,exposant,"")||bloc,bloc="i"===txt[k].toLowerCase()&&mesFonctions.block(bloc,indice,"")||bloc,"fr"!==optionsBraille.codeBrailleMath);k++);}for(var nextElt=elt.nextElementSibling;nextElt&&"bloc"===nextElt.tagName.toLowerCase();)nextElt=nextElt.nextElementSibling;nextElt&&-1!==["mi","mo","mn"].indexOf(nextElt.tagName.toLowerCase())&&(txt.length>1&&(indicateurBase=txt[0]),bloc=mesFonctions.block(bloc,"",indicateurBase)),parent.replaceChild(bloc,elt)}}},_newBlocBase:function(eq){for(var bb=eq.getElementsByTagName("blocbase"),indicateurBase=mathBraille.caracMath.indicateurBase&&mathBraille.caracMath.indicateurBase||"";bb[0];){var parent=bb[0].parentNode,bloc=document.createElement("blocbase-f");bloc.innerHTML=bb[0].innerHTML,bloc=mesFonctions.block(bloc,indicateurBase,""),parent.replaceChild(bloc,bb[0])}},_newMsqrtBloc:function(eq,tagName){tagName=tagName||"msqrt";for(var racine=eq.getElementsByTagName(tagName);racine[0];){var parent=racine[0].parentNode,k=writeEq._radicauxEmboites(racine[0]),bloc=document.createElement(tagName+"-"+k);bloc.innerHTML=racine[0].innerHTML,parent.replaceChild(bloc,racine[0])}},_radicauxEmboites:function(racine){for(var k=0,tagName,parent=racine.parentNode;parent;)("msqrt"===(tagName=parent.tagName.toLowerCase().split("-"))[0]||"mroot"===tagName[0])&&k++,parent=parent.parentNode;return k},_newMsqrtWrite:function(eq){var racine=mesFonctions.getElementsByContainTagName(eq,"msqrt"),lracine=racine.length,i;for(i=racine[0]?lracine-1:-1;-1!==i;i--){var elt=racine[i],tagName=elt.tagName.toLowerCase().split("-"),parent=elt.parentNode,bloc=document.createElement("bloc"),enfants=elt.children,radical=mathBraille.caracMath.racine,ordre=mathBraille.caracMath.ordreRadical&&mathBraille.caracMath.ordreRadical.repeat(tagName[1]),finRadical=mathBraille.caracMath.finRacine;bloc.innerHTML=elt.innerHTML,1===enfants.length?"mrow"!==enfants[0].tagName.toLowerCase()&&"mpadded"!==enfants[0].tagName.toLowerCase()||(bloc=mesFonctions.nbChildrens(enfants[0])>1&&mesFonctions.block(bloc)||bloc):bloc=mesFonctions.block(bloc),bloc=finRadical&&mesFonctions.block(bloc,ordre+radical,ordre+finRadical)||mesFonctions.block(bloc,radical,""),parent.replaceChild(bloc,elt)}},_newMrootBloc:function(eq){writeEq._newMsqrtBloc(eq,"mroot")},_newMrootWrite:function(eq){var mroot=mesFonctions.getElementsByContainTagName(eq,"mroot"),lroot=mroot.length,i;for(i=mroot[0]?lroot-1:-1;-1!==i;i--){var elt=mroot[i],tagName=elt.tagName.toLowerCase().split("-"),parent=elt.parentNode,bloc=document.createElement("bloc"),bloccontenu=document.createElement("bloc"),enfants=elt.children,enfant0=enfants[0],enfant1=enfants[1],monbool,radical=mathBraille.caracMath.racine,ordre=mathBraille.caracMath.ordreRadical&&mathBraille.caracMath.ordreRadical.repeat(tagName[1]),finRadical=mathBraille.caracMath.finRacine,indiceRadical=mathBraille.caracMath.indiceRadical;bloccontenu.appendChild(enfant0);var child1=enfant0.children;elt.nextElementSibling&&"mo"!==elt.nextElementSibling.tagName.toLowerCase()&&(monbool=!0),elt.previousElementSibling&&"mo"!==elt.previousElementSibling.tagName.toLowerCase()&&(monbool=!0),1===child1.length?"mrow"!==child1[0].tagName.toLowerCase()&&"mpadded"!==child1[0].tagName.toLowerCase()||(bloccontenu=mesFonctions.nbChildrens(child1[0])>1&&mesFonctions.block(bloccontenu)||bloccontenu):child1.length>=1&&(bloccontenu=mesFonctions.block(bloccontenu)),bloccontenu=finRadical&&mesFonctions.block(bloccontenu,radical,"")||mesFonctions.block(bloccontenu,radical,""),bloc.appendChild(enfant1),bloc.appendChild(bloccontenu),bloc=finRadical&&mesFonctions.block(bloc,ordre+indiceRadical,ordre+finRadical)||mesFonctions.block(bloc,mathBraille.caracMath.exposant,""),bloc=!finRadical&&monbool&&mesFonctions.block(bloc)||bloc,parent.replaceChild(bloc,elt)}},_retourChariotMatrice:function(monEquation){var txt,nbcar,close,idx,j,spc="";nbcar=(txt=monEquation.textContent.split("")).indexOf(marqueMat);let paraBool=-1===monEquation.textContent.indexOf(marqueRetourLigne+mathBraille.caracMath.parenthese.open.braille())&&-1==monEquation.textContent.indexOf(marqueRetourLigne+mathBraille.caracMath.crochet.open.braille())&&-1==monEquation.textContent.indexOf(marqueRetourLigne+mathBraille.caracMath.barre.open.braille());for(-1!==nbcar&&txt.splice(nbcar,1),-1!==(close=txt.indexOf(marqueClose))?(txt.splice(close,1),nbcar=paraBool?-1!==nbcar&&nbcar-2||0:-1!==nbcar&&nbcar-1||0):nbcar=-1!==nbcar&&nbcar||0,j=0;j!==nbcar;j++)spc+=espace;for(idx=txt.indexOf(marqueRetourLigne);-1!==idx;)txt.splice(idx,1,"<br/>"+spc),idx=txt.indexOf(marqueRetourLigne,idx+1);return txt.join("")},_calculEspaceMTD:function(monEquation){var espaceEnTrop=new RegExp(espace+marqueCell+espace,"g");monEquation.textContent=monEquation.textContent.replace(espaceEnTrop,espace+marqueCell);var regex=new RegExp(marqueRetourLigne,"gi"),nbligne=monEquation.textContent.match(regex)&&monEquation.textContent.match(regex).length+1;if(null===nbligne)return monEquation.textContent;for(var txt=monEquation.textContent.split(""),lcell=[],llcell,lcol=[],llcol,posmarque=[],marque1=txt.indexOf(marqueCell),marque2=txt.indexOf(marqueCell,marque1+1),i,j,l,spc;-1!==marque1;)l=marque2-marque1-1,lcell.push(l),posmarque.push(marque2),marque1=txt.indexOf(marqueCell,marque2+1),marque2=txt.indexOf(marqueCell,marque1+1);for(llcol=(llcell=lcell.length)/nbligne,lcol.length=llcol,lcol.fill(0),i=0;i!==llcell;i++)lcell[i]>lcol[i%llcol]&&(lcol[i%llcol]=lcell[i]);for(j=0;j!==llcell;j++)if(marque2=posmarque[j],spc="",(l=lcol[j%llcol]-lcell[j])>0){for(i=1;i<=l;i++)spc+=espace;txt.splice(marque2,1,spc)}return(txt=txt.filter(writeEq._filtremarque)).join("")},_filtremarque:function(element){return element!==marqueCell},_indicateurNumerique:function(monEquation){var txt=monEquation.textContent.split(""),num=["⠴","⠂","⠆","⠒","⠲","⠢","⠖","⠶","⠦","⠔"];-1!==num.indexOf(txt[0])&&txt.splice(0,0,mathBraille.caracMath.indicateurNumerique.braille());for(var elt="BLANK".braille(),sp=txt.indexOf(elt);-1!==sp;)-1!==num.indexOf(txt[sp+1])&&txt.splice(sp+1,0,mathBraille.caracMath.indicateurNumerique.braille()),sp=txt.indexOf(elt,sp+1);return txt.join("")},_writeform:function(monEquation){monEquation.textContent=monEquation.textContent.trimall(),monEquation.textContent=monEquation.textContent.replace(/--/gi,"-"),monEquation.textContent=monEquation.textContent.braille(),monEquation.textContent=writeEq._petitsSoucis(monEquation),!optionsBraille.matriceLineaire&&!hardmat&&(monEquation.innerHTML=writeEq._calculEspaceMTD(monEquation)),monEquation.innerHTML=writeEq._retourChariotMatrice(monEquation),"nemeth"===optionsBraille.codeBrailleMath&&(monEquation.innerHTML=writeEq._indicateurNumerique(monEquation)),monEquation.innerHTML=0!==optionsBraille.coupureFormule&&writeEq._coupureFormule(monEquation,optionsBraille.coupureFormule)||monEquation.innerHTML},_petitsSoucis:function(monEquation){let txt=monEquation.textContent.replace(/⠈⠖⠖/g,"⠈⠰⠖⠆⠖");return txt=txt.replace(/⠈⠤⠤/g,"⠈⠰⠤⠆⠤"),txt},_coupureFormule:function(monEquation,long){if(-1!==monEquation.innerHTML.indexOf("<br"))return monEquation.innerHTML;long=parseInt(long);let texte=monEquation.textContent,texteCoupe="",textePlus="",cesure=mathBraille.caracMath.coupureFormule.braille()+"<br />";if(0!==long||long-1>0){let nbSplit=Math.floor(texte.length/(long-1))+1;for(let i=0;i!==nbSplit;i++)textePlus=i!==nbSplit-1&&texte.slice(i*(long-1),(i+1)*(long-1))||texte.slice(i*(long-1)),texteCoupe+=i!==nbSplit-1&&textePlus+cesure||textePlus}return texteCoupe}};exports.Mathml2braille=mbraille,exports.Brailledirect=brailledirect}(this);let txtMathFR={44:"virgule",59:"point virgule",58:"tel que",45:"moins",46:"multiplié par",42:"étoile",43:"plus",47:"divisé par",61:"égale",91:"crochet fermé",93:"croché ouvert",33:"factoriel",160:" ",171:"guillemet français ouvrant",187:"guillemet français fermant",176:"degré",60:"inférieur strictement à",62:"supérieur strictement à",8804:"est inférieur ou égal à",8805:"est supérieur ou égal à",10877:"est inférieur ou égal à",10878:"est supérieur ou égal à",177:"plus ou moins",8800:"est différent de",247:"divisé par",215:"fois",8722:"moins",8725:"sur",8260:"sur",8734:"l'infini",8242:"prime",8243:"seconde",8244:"tierce",8853:"-46-235-",8855:"-46-35-",8747:"intégrale",8706:"d rond",8710:"delta majuscule",8711:"nabla",8748:"intégrale double",8749:"intégrale triple",10764:"-12346-12346-12346-12346-",8750:"intégrale de flux",8751:"intégrale de flux double",8752:"intégrale de flux triple",8477:"grand r",8450:"grand c",8469:"grand n",8473:"grand p",8474:"grand q",8484:"grand z",8704:"pour tout",8705:"complémentaire de",8707:"il existe",8708:"il n'existe pas",8709:"l'ensemble vide",8743:"et",8744:"et/ou",8745:"inter",8746:"union",8712:"élément de",8713:"n'appartient pas à",8714:"élément de",8715:"contient comme élément",8716:"-46-45-34-",8717:"-46-45-16-",8834:"inclus dans",8835:"contient",8836:"non inclus dans",8837:"",8838:"est inclus (au sens large) dans",8739:"-123456-",8741:"est parallèle à",8742:"n'est pas parallèle à",8869:"est perpendiculaire à",8773:"-456-2356-",8776:"est approximativement égal à",8777:"-46-5-2356-",8764:"-45-2356-",8801:{math:"-2356-2356-",chimie:"123456"},8802:"-46-2356-2356-",8810:"-5-5-126-",8811:"-5-5-345-",8771:"-5-2356-",8778:"-456-5-2356-",8723:"-36-235-",8727:"étoile",8728:"rond",8729:"-35-35-",8826:"-46-46-126-",8827:"-46-46-345-",8828:"-45-45-126-",8829:"-45-45-345-",8917:"-5-2356-",8942:"points de suspension",8230:"points de suspension",8943:"points de suspension",8944:"points de suspension",8945:"points de suspension",8721:"capital SIGMA",8719:"capital PI",913:"capital ‌Alpha",914:"capital ‌Beta",915:"capital ‌Gamma",916:"capital ‌Delta",917:"capital ‌Epsilon",918:"capital ‌Zeta",919:"capital ‌Eta",920:"capital ‌Theta",921:"capital ‌Iota",922:"capital ‌Kappa",923:"capital ‌Lambda",924:"capital ‌Mu",925:"capital ‌Nu",926:"capital ‌Xi",927:"capital ‌Omicron",928:"capital ‌Pi",929:"capital ‌Rho",931:"capital ‌Sigma",932:"capital ‌Tau",933:"capital ‌Upsilon",934:"capital ‌Phi",935:"capital ‌Chi",936:"capital ‌Psi",937:"capital ‌Omega",945:"‌alpha",946:"‌beta",947:"‌gamma",948:"‌delta",949:"‌epsilon",1013:"epsilon",950:"‌zeta",951:"‌êta",952:"‌theta",953:"‌iota",954:"‌kappa",955:"‌lambda",956:"‌mu",957:"‌nu",958:"‌xi",959:"‌omicron",960:"‌pi",961:"‌rho",963:"‌sigma",964:"‌tau",965:"‌upsilon",966:"‌phi",967:"‌chi",968:"‌psi",969:"‌omega",8592:"-456-246-",8593:"-45-12456-",8594:"-456-156-",8595:"-46-12456-",8596:"-5-12456-",8598:"-45-246-",8599:"-45-156-",8600:"-46-156-",8601:"-46-246-",8614:"a pour image",8628:"-46-156-",8644:"-456-12456-",8652:"-456-12456-",8653:"-46-5-25-",8655:"-46-25-2-",8656:"-5-25-",8658:"implique",8660:"est équivalent à",9633:"d'alembertien",9651:"laplatien",10548:"-45-156-",10549:"-46-156-",10231:"-5-12456-"};!function(){"use strict";const ponctuations=[44,59,171,187],miTexte={ln:"logarithme népérien de",arccos:"arc cosinus",arcsin:"arc sinus",arctan:"arc tangente",cos:"cosinus",sin:"sinus",tan:"tangente",ch:"cosinus hyperbolique",sh:"sinus hyperbolique",th:"tangente hyperbolique",Card:"cardinal de"},varsansup=[8477,8450,8469,8473,8474,8484],varintegral=[8747,8748,8749,10764,8750,8751,8752],texte={mmultiscripts_ig:"%1 indice inférieur %5 à gauche",mmultiscripts_eg:"%1 indice supérieur %6 à gauche",mmultiscripts_ieg:"%1 précédé de %5 en indice et de %6 en exposant",mfrac:"%1 sur %2",msup:"%1 exposant %2",msup_sans:"%1 %2",carre:"%1 au carré",cube:"%1 au cube",msub:"%1 indice %2",msqrt:"racine carrée de %1",msubsup:"%1 indice %2 exposant %3",msubsup_sans:"%1 %2 %3",msubsup2:"%1 indice %2 au carré",msubsup3:"%1 indice %2 au cube",mroot:"racine %2ième de %1",mroot3:"racine cubique de %1",integrale:"%1 de %2 à %3 de",integrale2:"%1 sur %2 de",limite1:"limite quand %2 de",limite2:"limite quand %2, %3, de",somme:"somme pour %2 à %3 de",somme2:"somme pour %2 de",produit:"produit pour %2 à %3 de",produit2:"produit pour %2 de",log_base:"logarithme en base %2 de",vecteur:"vecteur %1",angle:"angle %1",barre:"mesure algébrique de %1",arc:"arc %1",matrice:"la matrice %1",determinant:"le déterminant %1",systeme_equation:"le système d'équations %1",valeur_absolue:"valeur absolue de %1",norme:"norme de %1",intervalle_ferme:"l'intervalle fermé %1",intervalle_ouvert:"l'intervalle ouvert %1",intervalle_og_fd:"l'intervalle %1 ouvert à gauche et fermé à droite",intervalle_fg_od:"l'intervalle %1 fermé à gauche et ouvert à droite",ensemble:"l'ensemble d'éléments %1",combinaison:"combinaison de %2 parmi %3",complementaire:"complémentaire de %3 dans %2"};let mesPosTexte={};Object.keys(texte).forEach(k=>{let montexte=texte[k];montexte=montexte.replace(/\'/g,"¤prime¤");let regex=new RegExp("%([0-9])","g"),tsplit=montexte.split(/%[0-9]/),mesPos=[];for(var array1;null!==(array1=regex.exec(montexte));)mesPos.push({name:array1[1]-1,pos:montexte.indexOf(array1[0])}),regex.lastIndex;mesPos.sort((a,b)=>a.pos-b.pos),mesPosTexte[k]={value:tsplit,mesPositons:mesPos}});const casPart={"'''":"tierce","''":"seconde","'":"prime"};let mesFonctions={},writeEq={},optionsText={ponctuation:!1,descMatrice:!1},monTxtMath=txtMathFR;Mathml2braille.prototype.mathml2text=function(){mesFonctions=this._mesFonctions,writeEq=this._writeEq,arguments[0]&&"object"==typeof arguments[0]&&(optionsText=mesFonctions._extendDefaults(optionsText,arguments[0])),monTxtMath=optionsText.ponctuation?txtMathFR:Object.keys(txtMathFR).filter(key=>-1===ponctuations.indexOf(Number.parseInt(key))).reduce((res,key)=>(res[key]=txtMathFR[key],res),{});let mesFormules=this._formules;mesFormules.forEach(form=>{let formClone=form.cloneNode(!0),i=0;rewrite._miTexte(formClone),writeEq._supprimeprefix(formClone),writeEq._superflus(formClone),writeEq._ajoutmfenced(formClone),writeEq._reecritureMultiscripts(formClone),rewrite._ilExisteUnique(formClone),rewrite._complementaire(formClone),rewrite._fonctionDe(formClone);let mesFenced=formClone.querySelectorAll("mfenced");for(i=mesFenced.length;i--;){let mfenced=mesFenced[i],nodeBefore=mfenced.previousElementSibling;if(nodeBefore&&"mi"===nodeBefore.tagName.toLowerCase()&&1===nodeBefore.textContent.trim().length){let open=mfenced.getAttribute("open")||"(",close=mfenced.getAttribute("close")||")";"("===open&&")"===close&&rewrite._fonctions(mfenced)}else mfenced.getAttribute("separators")?(rewrite._mfenced(mfenced),render._mfenced(mfenced)):render._mfenced(mfenced)}let mesOver=formClone.querySelectorAll("mover");for(i=mesOver.length;i--;){let enfants,vecteurs=[8594],angles=[8743,94],barres=[175,95],arcs=[9180,8994],cca=mesOver[i].children[1].textContent.trim().charCodeAt();-1!==vecteurs.indexOf(cca)&&render._vecteur(mesOver[i]),-1!==angles.indexOf(cca)&&render._angle(mesOver[i]),-1!==barres.indexOf(cca)&&render._barre(mesOver[i]),-1!==arcs.indexOf(cca)&&render._arc(mesOver[i])}let mesMultiscripts=formClone.querySelectorAll("mmultiscripts");for(i=mesMultiscripts.length;i--;)render._mmultiscripts(mesMultiscripts[i]);let mesSqrt=formClone.querySelectorAll("msqrt");for(i=mesSqrt.length;i--;)render._msqrt(mesSqrt[i]);let mesRoot=formClone.querySelectorAll("mroot");for(i=mesRoot.length;i--;)render._mroot(mesRoot[i]);let mesFrac=formClone.querySelectorAll("mfrac");for(i=mesFrac.length;i--;)render._mfrac(mesFrac[i]);let mesSup=formClone.querySelectorAll("msup"),mesSub;for(i=mesSup.length;i--;)render._msup(mesSup[i]);formClone.querySelectorAll("msub").forEach(elt=>{render._msub(elt)});let mesSubSup=formClone.querySelectorAll("msubsup"),mesUnder;for(i=mesSubSup.length;i--;)render._msubsup(mesSubSup[i]);formClone.querySelectorAll("munder").forEach(elt=>{render._munder(elt)});let mesUnderOver=formClone.querySelectorAll("munderover");for(i=mesUnderOver.length;i--;)render._munderover(mesUnderOver[i]);render._writeForm(form,formClone)})};var render={get_formule:function(clmath){return document.querySelectorAll(clmath)},_munderover:function(munderover){switch(munderover.children[0].textContent.trim()){case"∑":render._writeText(munderover,"somme");break;case"∏":render._writeText(munderover,"produit")}},_mfenced:function(mfenced){if(mesFonctions.hasChild(mfenced,"mtable"))return void render._matrice(mfenced);let open=mfenced.getAttribute("open")||"(",close=mfenced.getAttribute("close")||")",separators=mfenced.getAttribute("separators"),row=document.createElement("mrow"),parent=mfenced.parentNode;const crochets=["[","]","{","}"];if(separators&&-1!==crochets.indexOf(open)&&-1!==crochets.indexOf(close)){for(;mfenced.children[0];)row.appendChild(document.createTextNode("\n")),row.appendChild(mfenced.children[0]);let row2=document.createElement("mrow");if(row2.appendChild(row),parent.replaceChild(row2,mfenced),"["===open&&"]"===close)return void render._writeText(row2,"intervalle_ferme");if("]"===open&&"["===close)return void render._writeText(row2,"intervalle_ouvert");if("]"===open&&"]"===close)return void render._writeText(row2,"intervalle_og_fd");if("["===open&&"["===close)return void render._writeText(row2,"intervalle_fg_od");if("{"===open&&"}"===close)return void render._writeText(row2,"ensemble")}const paraNorme=["∥","||","‖"],paraAbsolue=["∣","|"];open!==close||-1===paraNorme.indexOf(open)?open!==close||-1===paraAbsolue.indexOf(open)?(row.appendChild(mesFonctions.block(mfenced.cloneNode(!0),open,close)),parent.replaceChild(row,mfenced)):render._writeText(mfenced,"valeur_absolue"):render._writeText(mfenced,"norme")},_mfrac:function(mfrac){render._writeText(mfrac)},_msup:function(msup){if(-1!==varsansup.indexOf(msup.children[0].textContent.trim().charCodeAt()))render._writeText(msup,"msup_sans");else switch(msup.children[1].textContent.trim()){case"2":render._writeText(msup,"carre");break;case"3":render._writeText(msup,"cube");break;default:render._writeText(msup)}},_msub:function(msub){let enfants=msub.children;if(-1===varintegral.indexOf(enfants[0].textContent.trim().charCodeAt()))switch(enfants[0].textContent.trim()){case"log":render._writeText(msub,"log_base");break;default:render._writeText(msub)}else render._integrale(msub)},_msubsup:function(msubsup){let enfants=msubsup.children;if("C"!==enfants[0].textContent.trim())if(-1===varintegral.indexOf(enfants[0].textContent.trim().charCodeAt()))if(-1===varsansup.indexOf(enfants[0].textContent.trim().charCodeAt()))switch(enfants[2].textContent.trim()){case"2":render._writeText(msubsup,"msubsup2");break;case"3":render._writeText(msubsup,"msubsup3");break;default:render._writeText(msubsup)}else render._writeText(msubsup,"msubsup_sans");else render._integrale(msubsup);else render._writeText(msubsup,"combinaison")},_mmultiscripts:function(mmultiscripts){let enfants=mmultiscripts.children,tagName=[],l=enfants.length,i=0;for(;i!==l;i++)tagName.push(enfants[i].tagName.toLowerCase());"none"===tagName[1]&&"none"===tagName[2]&&"none"===tagName[4]?render._writeText(mmultiscripts,"mmultiscripts_eg"):"none"===tagName[1]&&"none"===tagName[2]&&"none"===tagName[5]?render._writeText(mmultiscripts,"mmultiscripts_ig"):"none"===tagName[1]&&"none"===tagName[2]&&"none"!==tagName[4]&&"none"!==tagName[5]&&render._writeText(mmultiscripts,"mmultiscripts_ieg")},_msqrt:function(msqrt){let enfant=msqrt.children;if(enfant.length>1){let row=document.createElement("mrow");for(;enfant[0];)row.appendChild(document.createTextNode("\n")),row.appendChild(enfant[0]),row.appendChild(document.createTextNode("\n"));msqrt.appendChild(row)}render._writeText(msqrt)},_mroot:function(mroot){switch(mroot.children[1].textContent.trim()){case"3":render._writeText(mroot,"mroot3");break;default:render._writeText(mroot)}},_munder:function(munder){switch(munder.children[0].textContent.trim().toLowerCase()){case"lim":rewrite._limiteFleche(munder),mesFonctions.hasChild(munder,"mtable")?(rewrite._limite(munder),render._writeText(munder,"limite2")):render._writeText(munder,"limite1");break;case"∑":render._writeText(munder,"somme2");break;case"∏":render._writeText(munder,"produit2")}},_integrale:function(elt){3===elt.children.length?render._writeText(elt,"integrale"):2===elt.children.length&&render._writeText(elt,"integrale2")},_vecteur:function(elt){render._writeText(elt,"vecteur")},_angle:function(elt){render._writeText(elt,"angle")},_barre:function(elt){render._writeText(elt,"barre")},_arc:function(elt){render._writeText(elt,"arc")},_matrice:function(mfenced){let open=mfenced.getAttribute("open")||"(",close=mfenced.getAttribute("close")||")",boolD="|"===close&&"|"===open,boolM="("===open&&")"===close||"["===open&&"]"===close,boolS=open!==close&&"{"===open;boolS?rewrite._table(mfenced.children[0],"lignes"):rewrite._table(mfenced.children[0]),boolD&&render._writeText(mfenced,"determinant"),boolM&&render._writeText(mfenced,"matrice"),boolS&&render._writeText(mfenced,"systeme_equation")},_writeText:function(elt){let eltTagName=arguments[1]&&arguments[1]||elt.tagName,parent=elt.parentNode,enfant=elt.children,row=document.createElement("row"),mesPos=mesPosTexte[eltTagName].mesPositons,mesValues=mesPosTexte[eltTagName].value;mesValues.forEach((t,i)=>{if(row.appendChild(document.createTextNode(t)),i!==mesValues.length-1){let monEnfant=enfant[mesPos[i].name];monEnfant.children.length>1&&(monEnfant=render._writeGuillemet(monEnfant)),row.appendChild(monEnfant.cloneNode(!0))}});const tagNameOut=["msqrt","msubsup","mmultiscripts","munder","mrow","mfrac"],tagNameParentOut=["bloc","math"];row.children.length>1&&-1===tagNameOut.indexOf(elt.tagName.toLowerCase())&&-1===tagNameParentOut.indexOf(parent.tagName.toLowerCase())&&(row=render._writeGuillemet(row)),parent.replaceChild(row,elt)},_writeForm:function(form,formClone){let span=document.createElement("span");span.classList.add("ecriture_auto");let txt=formClone.textContent;Object.keys(casPart).forEach(d=>{txt=txt.replace(new RegExp("\\"+d,"g"),casPart[d])}),Object.keys(monTxtMath).forEach(d=>{txt=txt.replace(new RegExp("\\"+String.fromCharCode(d),"g")," "+monTxtMath[d]+" ")}),txt=txt.replace(/\s+/g," "),txt=txt.replace(/¤prime¤/g,"'"),txt=render._guillemetsDANSguillemets(txt),txt=rewriteTextFinal._angle(txt),span.textContent=txt,form.parentNode.insertBefore(span,form)},_writeGuillemet:function(elt){return mesFonctions.block(elt.cloneNode(!0),"«","»")},_guillemetsDANSguillemets:function(txt){let gOuvert=[],gFerme=[],posG2=[],pos=txt.indexOf("«");for(;-1!==pos;)gOuvert.push(pos),pos=txt.indexOf("«",pos+1);for(pos=txt.indexOf("»");-1!==pos;)gFerme.push(pos),pos=txt.indexOf("»",pos+1);let gOF=gOuvert.concat(gFerme),arrayO=gOuvert.slice(0),arrayF=gFerme.slice(0),mesG=[];return arrayO.sort((a,b)=>b-a),arrayF.forEach(p=>{let found=arrayO.find(m=>p-m>0);mesG.push([p,found]),arrayO.splice(arrayO.indexOf(found),1)}),mesG.forEach(a=>{let found=gOF.find(m=>m>a[1]&&m<a[0]);for(;found;)posG2.push(found),gOF.splice(gOF.indexOf(found),1),found=gOF.find(m=>m>a[1]&&m<a[0])}),posG2.forEach(pos=>{txt=txt.substring(0,pos)+'"'+txt.substring(pos+1,txt.length)}),txt}},rewrite={_doubleStruck:function(mi){switch(mi.textContent){case"R":mi.textContent=String.fromCharCode(8477);break;case"C":mi.textContent=String.fromCharCode(8450);break;case"N":mi.textContent=String.fromCharCode(8469);break;case"P":mi.textContent=String.fromCharCode(8473);break;case"Q":mi.textContent=String.fromCharCode(8474);break;case"Z":mi.textContent=String.fromCharCode(8484)}},_limite:function(munder){let df=document.createDocumentFragment(),mtable=munder.querySelector("mtable"),mrow1=document.createElement("mrow");mrow1.appendChild(munder.querySelector("mtr"));let mrow2=document.createElement("mrow");mrow2.appendChild(munder.querySelector("mtr")),df.appendChild(mrow1),df.appendChild(mrow2),munder.replaceChild(df,mtable)},_limiteFleche:function(munder){let fleche=[8594],mesmo=munder.querySelectorAll("mo"),i=mesmo.length;for(;i--;){let txt=mesmo[i].textContent.trim();if(-1!==fleche.indexOf(txt.charCodeAt())){let mtxt=document.createElement("mtxt");mtxt.textContent="tend vers",mesmo[i].parentNode.replaceChild(mtxt,mesmo[i])}}},_mfenced:function(mfenced){let sep=mfenced.getAttribute("separators"),mo=document.createElement("mo");mo.textContent=sep;let enfants=mfenced.children,i=enfants.length;for(;i--;)0!==i&&mfenced.insertBefore(mo.cloneNode(!0),enfants[i])},_miTexte:function(form){let mesMi=form.querySelectorAll("mi"),i=mesMi.length;for(;i--;){let boolDoubleStruck;mesMi[i].getAttribute("mathvariant")&&"double-struck"===mesMi[i].getAttribute("mathvariant")&&rewrite._doubleStruck(mesMi[i]);let txt=mesMi[i].textContent.trim();mesMi[i].textContent=miTexte[txt]&&miTexte[txt]||mesMi[i].textContent}},_ilExisteUnique(form){let mesMi=form.querySelectorAll("mi"),i=mesMi.length;for(;i--;)if("∃"===mesMi[i].textContent.trim()&&mesMi[i].nextElementSibling&&"!"===mesMi[i].nextElementSibling.textContent.trim()){let mtext=document.createElement("mtext"),parent=mesMi[i].parentNode;mtext.appendChild(document.createTextNode("un unique")),parent.replaceChild(mtext,mesMi[i].nextElementSibling)}},_complementaire(form){let mesMi;form.querySelectorAll("mi").forEach(mi=>{if("∁"===mi.textContent.trim()){let parent=mi.parentElement;if(parent&&"msub"===parent.tagName){let next;if(parent.nextElementSibling){let mrow=document.createElement("mrow");mrow.appendChild(parent.firstElementChild),mrow.appendChild(parent.firstElementChild),mrow.appendChild(parent.nextElementSibling),parent.parentElement.replaceChild(mrow,parent),render._writeText(mrow,"complementaire")}}}})},_fonctions:function(mfenced){let parent=mfenced.parentNode,mtext=document.createElement("mtext");for(mtext.appendChild(document.createTextNode("\n")),mtext.appendChild(document.createTextNode("de")),mtext.appendChild(document.createTextNode("\n"));mfenced.children[0];)mtext.appendChild(mfenced.children[0]);parent.replaceChild(mtext,mfenced)},_fonctionDe:function(form){let mtable=form.querySelector("mtable");if(mtable){let txt=mtable.textContent;if(-1!==txt.indexOf("→")&&-1!==txt.indexOf("↦")){let mesmo;mtable.querySelectorAll("mo").forEach(m=>{switch(m.textContent.trim()){case"→":m.textContent="dans";break;case"↦":m.textContent="associe";break;case":":m.textContent="de"}});let mestd=mtable.querySelectorAll("mtd"),row=document.createElement("mrow");for(let i=0;i!==mestd.length;i++)row.appendChild(mestd[i]),i!==mestd.length-1&&row.appendChild(document.createTextNode("qui a\n"));mtable.parentNode.replaceChild(row,mtable)}}},_table:function(mtable){let mesTr=mtable.querySelectorAll("mtr"),mrow=document.createElement("mrow"),k=0,ligne=mesTr.length,colonne=mesTr[0].querySelectorAll("mtd").length,textNode="("+ligne+" lignes et "+colonne+" colonnes)\n";if(arguments[1])switch(arguments[1]){case"lignes":textNode="("+ligne+" lignes)\n";break;case"colonnes":textNode="("+colonne+" colonnes)\n"}for(optionsText.descMatrice&&mrow.appendChild(document.createTextNode(textNode));k!==ligne;k++){let mesTd=mesTr[k].querySelectorAll("mtd"),i=0,ltd=mesTd.length;for(;i!==ltd;i++){let td=mesTd[i];""===td.textContent.trim()&&td.appendChild(document.createTextNode("case vide")),mrow.appendChild(td),mrow.appendChild(document.createTextNode("\n")),i!==ltd-1&&mrow.appendChild(document.createTextNode(";")),mrow.appendChild(document.createTextNode("\n"))}k!==ligne-1&&mrow.appendChild(document.createTextNode("ligne suivante"))}mtable.parentNode.replaceChild(mrow,mtable)}},rewriteTextFinal={_angle:function(txt){var mots=txt.split(" ");return-1!==mots.indexOf("angle")&&-1!==mots.indexOf(",")&&(-1!==mots.indexOf("vecteur")?txt=txt.replace(",","avec le").replace("(","du"):-1!==mots.indexOf(",")&&(txt=txt.replace(",","avec").replace("(","de")),txt=txt.replace(")",""),console.log(txt)),txt}}}()}(window,document);